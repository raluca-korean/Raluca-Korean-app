<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Raluca Korean – Builder Multi-Clause</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
:root{
  --bg1:#dff3ff;
  --bg2:#ffe9ff;
  --bg3:#f4fffc;
  --bg4:#e8f0ff;
  --accent:#7b5dff;
  --card-bg:#ffffffcc;
  --text-main:#2f343b;
  --text-soft:#7a8088;
  --border:#e1d7c7;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,sans-serif;
  background:linear-gradient(120deg,var(--bg1),var(--bg2),var(--bg3),var(--bg4));
  background-size:380% 380%;
  animation:bgFlow 28s ease-in-out infinite;
}

@keyframes bgFlow{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.app{max-width:1040px;margin:0 auto;padding:18px 14px 80px}

.rk-header{
  padding:16px;
  border-radius:26px;
  background:linear-gradient(120deg,#6fb8ff,#a774ff,#ff7fd1);
  color:#fff;
  box-shadow:0 18px 45px rgba(77,93,255,.4);
}

.rk-header-main{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.rk-badge{
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  background:rgba(255,255,255,.25);
}

.card{
  margin-top:16px;
  padding:18px;
  border-radius:22px;
  background:var(--card-bg);
  border:1px solid rgba(255,255,255,.7);
  box-shadow:0 18px 40px rgba(0,0,0,.12);
}

textarea{
  width:100%;
  min-height:80px;
  border-radius:16px;
  border:1px solid var(--border);
  padding:10px 12px;
  font-size:14px;
}

.btn-row{
  margin-top:10px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

button{
  border:none;
  border-radius:999px;
  padding:8px 16px;
  font-weight:800;
  cursor:pointer;
  background:linear-gradient(135deg,#6b8cff,#9b6bff);
  color:#fff;
}

button.secondary{
  background:linear-gradient(135deg,#ff9a6c,#ff5f8c);
}

.section-title{
  margin-top:22px;
  font-size:13px;
  font-weight:800;
  text-transform:uppercase;
}

.preview-card{
  margin-top:18px;
  padding:16px;
  border-radius:20px;
  background:var(--card-bg);
}

.preview-sentence{
  font-size:22px;
  font-weight:900;
}

.preview-ro{
  font-size:12px;
  color:var(--text-soft);
} 
  <link rel="stylesheet" href="builder.css" />
</head>

<body>
  <div class="app">
    <header class="rk-header">
      <div class="rk-header-main">
        <h1>RALUCA KOREAN</h1>
        <span class="rk-badge">Builder – Clean</span>
      </div>
      <p id="subtitle">
        Split multi + endings lipite de verb (verb infinitiv în tabel) + politețe doar în preview.
      </p>
    </header>

    <!-- INPUT -->
    <section class="card" id="roCard">
      <h2>Română / English → Coreeană (auto-fill)</h2>

      <div class="lang-row">
        <span>Limba propoziției:</span>
        <select id="langSelect">
          <option value="ro" selected>Română</option>
          <option value="en">English</option>
        </select>

        <label class="fill-only">
          <input type="checkbox" id="fillOnlyEmpty" checked />
          Completează doar câmpurile goale
        </label>
      </div>

      <textarea
        id="inputText"
        placeholder="Ex: Astăzi merg la cafenea și citesc o carte și beau o cafea."
      ></textarea>

      <div class="btn-row">
        <button id="autoFillBtn">Completează automat builder-ul</button>
        <button id="clearBtn" class="secondary">Curăță tot</button>
      </div>

      <div class="hint">
        • și → <code>-고</code> • dar → <code>-지만</code> • pentru că → <code>-아/어서</code>  
        • dacă → <code>-(으)면</code> • când → <code>-(으)ㄹ 때</code> • ca să → <code>-(으)려고</code>
      </div>

      <details class="grammars">
        <summary>Bibliotecă de gramatici</summary>
        <div id="grammarsGrid" class="grammars-grid"></div>
      </details>
    </section>

    <!-- BUILDER -->
    <h3 class="section-title">Builder (clauze)</h3>
    <div id="clausesHost"></div>

    <!-- PREVIEW -->
    <section class="preview-card">
      <div class="preview-title">
        <span>Propoziția finală</span>
        <label>
          <input type="checkbox" id="politeToggle" />
          Politețe (doar ultima clauză)
        </label>
      </div>

      <div id="previewSentence" class="preview-sentence">저 가요</div>
      <div id="previewInfo" class="preview-ro"></div>
    </section>
  </div>
<script>
  (() => {
  "use strict";

  /* =========================
     DOM
  ========================= */
  const host = document.getElementById("clausesHost");
  const previewSentence = document.getElementById("previewSentence");
  const previewInfo = document.getElementById("previewInfo");

  /* =========================
     HELPERS
  ========================= */
  function ensureClauseCount(n){
    const current = host.children.length;
    for(let i=current;i<n;i++){
      host.insertAdjacentHTML("beforeend", clauseHTML(i));
    }
    while(host.children.length > n){
      host.lastElementChild.remove();
    }
  }

  function clauseHTML(i){
    return `
      <div class="table-block" data-i="${i}">
        <div class="table-horizontal">
          ${col("subject","SUBJECT")}
          ${col("time","TIME")}
          ${col("place","PLACE")}
          ${col("mod","MOD")}
          ${col("object","OBJECT")}
          ${col("numeral","NUM")}
          ${col("counter","COUNT")}
          ${col("verb","VERB")}
          ${col("conj","CONJ")}
        </div>
      </div>
    `;
  }

  function col(key,label){
    return `
      <div class="col" data-key="${key}">
        <div class="col-header">${label}</div>
        <div class="col-body-main" contenteditable="true"></div>
      </div>
    `;
  }

  function rebuild(){
    const parts = [];
    document.querySelectorAll(".table-block").forEach(block=>{
      const cells = block.querySelectorAll(".col-body-main");
      cells.forEach(c=>{
        if(c.textContent.trim()){
          parts.push(c.textContent.trim());
        }
      });
    });
    previewSentence.textContent = parts.join(" ") || "저 가요";
    previewInfo.textContent =
      "Endings se lipesc de verb. Politețea se aplică doar ultimei clauze.";
  }

  /* =========================
     EVENTS
  ========================= */
  document.addEventListener("input", e=>{
    if(e.target.classList.contains("col-body-main")){
      rebuild();
    }
  });

  document.getElementById("clearBtn").onclick = () => {
    ensureClauseCount(1);
    host.querySelectorAll(".col-body-main").forEach(c=>c.textContent="");
    rebuild();
  };

  /* =========================
     INIT
  ========================= */
  ensureClauseCount(1);
  rebuild();
})();
      </script>
</body>
</html>
