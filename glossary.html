<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Raluca Korean â€” Glosar</title>

<style>
:root{
  --bg:#070617;
  --card: rgba(16,14,40,.75);
  --stroke: rgba(255,255,255,.12);
  --text:#f3f4ff;
  --muted: rgba(243,244,255,.7);
  --accent:#7c3aed;
  --accent2:#22d3ee;
  --ok:#34d399;
  --radius:22px;
  --shadow:0 18px 50px rgba(0,0,0,.45);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(135deg,#090818,#071425);
  color:var(--text);
}

.app{
  max-width:900px;
  margin:0 auto;
  padding:20px;
}

.card{
  background:var(--card);
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  padding:18px;
  margin-bottom:18px;
  box-shadow:var(--shadow);
}

h1{margin:0 0 6px;font-size:24px}
.sub{font-size:13px;color:var(--muted)}

input{
  width:100%;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background:rgba(10,8,28,.55);
  color:var(--text);
  font-size:15px;
}

.word{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background:rgba(10,8,28,.55);
  margin-bottom:8px;
}

.ko{font-weight:900;font-size:18px}
.ro{font-size:13px;color:var(--muted)}

.actions{
  display:flex;
  gap:10px;
  align-items:center;
}

.icon{
  cursor:pointer;
  font-size:18px;
}

.star.active{color:#facc15}

.badge{
  display:inline-block;
  padding:6px 10px;
  border-radius:999px;
  background:rgba(124,58,237,.15);
  border:1px solid rgba(124,58,237,.35);
  font-weight:900;
  font-size:12px;
}
</style>
</head>

<body>
<div class="app">

  <!-- HEADER -->
  <div class="card">
    <h1>Glosar Korean</h1>
    <div class="sub">PronunÈ›ie Â· Favorite Â· Context real</div>
  </div>
<!-- 3 CUVINTE PE ZI -->
<div class="card" id="dailyCard">
  <h3>ğŸ“… 3 cuvinte pe zi</h3>
  <div class="sub">RepetÄƒ zilnic, fÄƒrÄƒ stres</div>

  <div id="dailyWords"></div>

  <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap">
    <button onclick="playDaily()">ğŸ”Š PronunÈ›ie</button>
    <button onclick="startDailyQuiz()">ğŸ§  ExerseazÄƒ</button>
    <button onclick="refreshDaily()">ğŸ” Alte cuvinte</button>
  </div>
</div>
  <!-- SEARCH -->
<div class="card">
  <input
    type="text"
    id="search"
    placeholder="CautÄƒ (KO / RO)"
  />
</div>
  <!-- WORDS -->
  <div class="card">
    <div class="badge" id="count"></div>
    <div id="list"></div>
  </div>

</div>

<script>
  let dailyMode = "view"; // view | quiz
let dailyOriginalHTML = "";
/* =========================
   DATA
========================= */
const WORDS = [
  {ko:"ê°€ë‹¤", ro:"a merge"},
  {ko:"ì˜¤ë‹¤", ro:"a veni"},
  {ko:"ë¨¹ë‹¤", ro:"a mÃ¢nca"},
  {ko:"ë§ˆì‹œë‹¤", ro:"a bea"},
  {ko:"ê³µë¶€í•˜ë‹¤", ro:"a studia"},
  {ko:"íšŒì‚¬", ro:"companie"},
  {ko:"ì§‘", ro:"casÄƒ"},
  {ko:"ì‹œê°„", ro:"timp"},
  {ko:"ì¹œêµ¬", ro:"prieten"},
  {ko:"ì˜¤ëŠ˜", ro:"astÄƒzi"},
];
/* =========================
   FAVORITE
========================= */
function getFavs(){
  return JSON.parse(localStorage.getItem("FAV_WORDS")||"[]");
}
function isFav(ko){
  return getFavs().includes(ko);
}
function toggleFav(ko){
  let f=getFavs();
  f = f.includes(ko) ? f.filter(x=>x!==ko) : [...f,ko];
  localStorage.setItem("FAV_WORDS",JSON.stringify(f));
  render();
}

/* =========================
   YOUGLISH
========================= */
function openYouGlish(word){
  const url = `https://youglish.com/pronounce/${encodeURIComponent(word)}/korean`;
  window.open(url,"_blank");
}
/* =========================
   3 CUVINTE PE ZI
========================= */
function getTodayKey(){
  const d = new Date();
  return d.toISOString().slice(0,10); // YYYY-MM-DD
}

function getDailyWords(){
  const key = "DAILY_WORDS_" + getTodayKey();
  let saved = localStorage.getItem(key);

  if(saved){
    return JSON.parse(saved);
  }

  // shuffle simplu
  const shuffled = [...WORDS].sort(()=>Math.random()-0.5);
  const daily = shuffled.slice(0,3);

  localStorage.setItem(key, JSON.stringify(daily));
  return daily;
}

function renderDailyWords(){
  const box = document.getElementById("dailyWords");
  if(!box) return;

  const daily = getDailyWords();

  box.innerHTML = daily.map(w=>`
    <div class="word">
      <div>
        <div class="ko">${w.ko}</div>
        <div class="ro">${w.ro}</div>
      </div>
      <div class="actions">
        <span class="icon" onclick="speakKO('${w.ko}')">ğŸ”ˆ</span>
        <span class="icon" onclick="openYouGlish('${w.ko}')">ğŸ¥</span>
        <span class="icon star ${isFav(w.ko)?'active':''}"
              onclick="toggleFav('${w.ko}')">â­</span>
      </div>
    </div>
  `).join("");
}
  /* =========================
   TTS
========================= */
let AC = null;
function speakKO(text){
  if(!("speechSynthesis" in window)) return alert("TTS indisponibil");
  const u = new SpeechSynthesisUtterance(text);
  u.lang="ko-KR";
  u.rate=0.9;

  const v = speechSynthesis.getVoices()
    .find(v=>v.lang==="ko-KR");
  if(v) u.voice=v;

  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}
window.speechSynthesis.onvoiceschanged=()=>{};

/* =========================
   RENDER
========================= */
const list = document.getElementById("list");
const search = document.getElementById("search");
const count = document.getElementById("count");

function render(){
  const q = search.value.toLowerCase();
  const filtered = WORDS.filter(w =>
    w.ko.includes(q) || w.ro.toLowerCase().includes(q)
  );

  count.textContent = `${filtered.length} cuvinte`;

  list.innerHTML="";
  filtered.forEach(w=>{
    list.innerHTML += `
      <div class="word">
        <div>
          <div class="ko">${w.ko}</div>
          <div class="ro">${w.ro}</div>
        </div>
        <div class="actions">
          <span class="icon" title="PronunÈ›ie" onclick="speakKO('${w.ko}')">ğŸ”ˆ</span>
          <span class="icon" title="YouGlish" onclick="openYouGlish('${w.ko}')">ğŸ¥</span>
          <span class="icon star ${isFav(w.ko)?'active':''}"
                onclick="toggleFav('${w.ko}')">â­</span>
        </div>
      </div>`;
  });
}
let daily = [];

function pickDailyWords(){
  daily = [...WORDS].sort(()=>0.5-Math.random()).slice(0,3);
  renderDaily();
}
function renderDaily(){
  const card = document.getElementById("dailyCard");

  card.innerHTML = `
    <h3>ğŸ“… 3 cuvinte pe zi</h3>
    <div class="sub">RepetÄƒ zilnic, fÄƒrÄƒ stres</div>

    <div id="dailyWords">
      ${daily.map(w=>`
        <div class="example">
          <div class="ko">${w.ko}</div>
          <div class="ro">${w.ro}</div>
        </div>
      `).join("")}
    </div>

    <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap">
      <button onclick="playDaily()">ğŸ”Š PronunÈ›ie</button>
      <button onclick="startDailyQuiz()">ğŸ§  ExerseazÄƒ</button>
      <button onclick="refreshDaily()">ğŸ” Alte cuvinte</button>
    </div>
  `;

  dailyOriginalHTML = card.innerHTML;
  dailyMode = "view";
}
 function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "ko-KR";
  speechSynthesis.speak(u);
}

function playDaily(){
  daily.forEach((w,i)=>{
    setTimeout(()=>speak(w.ko), i*1500);
  });
}
  let dailyIndex = 0;

function startDailyQuiz(){
  dailyIndex = 0;
  showDailyQuestion();
}
function showDailyQuestion(){
  const card = document.getElementById("dailyCard");

  if(dailyIndex >= daily.length){
    card.innerHTML = `
      <h3>ğŸ‰ Gata pe azi!</h3>
      <div class="sub">Ai terminat exerciÈ›iul â€3 cuvinte pe ziâ€</div>

      <button onclick="exitDailyQuiz()">â¬… Ãnapoi</button>
    `;
    return;
  }

  const w = daily[dailyIndex];

  const opts = [...WORDS]
    .sort(()=>0.5-Math.random())
    .slice(0,2)
    .map(x=>x.ro);

  if(!opts.includes(w.ro)) opts[0]=w.ro;
  opts.sort(()=>0.5-Math.random());

  card.innerHTML = `
    <h3>ğŸ§  Ce Ã®nseamnÄƒ:</h3>
    <div class="example"><b>${w.ko}</b></div>

    ${opts.map(o=>`
      <button onclick="checkDaily('${o}','${w.ro}')">${o}</button>
    `).join("")}

    <div style="margin-top:12px">
      <button onclick="exitDailyQuiz()">â¬… Ãnapoi</button>
    </div>
  `;
}
  
  function checkDaily(sel, ok){
  if(sel===ok){
    dailyIndex++;
    showDailyQuestion();
  } else {
    alert("âŒ Mai Ã®ncearcÄƒ");
  }
}
  function refreshDaily(){
  pickDailyWords();
}
  function exitDailyQuiz(){
  const card = document.getElementById("dailyCard");
  card.innerHTML = dailyOriginalHTML;
  dailyMode = "view";
}
  function startDailyQuiz(){
  dailyIndex = 0;
  dailyMode = "quiz";
  showDailyQuestion();
}
  .oninput=render;
render();
renderDailyWords();
</script>
</body>
</html>
