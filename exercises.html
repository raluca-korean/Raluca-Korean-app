<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Raluca Korean — Exercises</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:#f7f3ff;
  color:#1b1630;
}
.app{max-width:900px;margin:0 auto;padding:16px}
.card{
  background:#fff;
  border-radius:18px;
  padding:16px;
  box-shadow:0 12px 30px rgba(0,0,0,.1);
  margin-bottom:16px;
}
h1{margin:0;font-size:22px}
select{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:15px;
}
.question{font-size:22px;font-weight:800;margin-bottom:6px}
.sub{font-size:13px;color:#666;margin-bottom:12px}
.answers{display:grid;gap:10px}
.answer{
  padding:12px;
  border-radius:14px;
  border:2px solid #ddd;
  cursor:pointer;
  font-weight:700;
}
.answer.selected{background:#e8ddff;border-color:#9b7cff}
.answer.correct{background:#d1fae5;border-color:#10b981}
.answer.wrong{background:#fee2e2;border-color:#ef4444}
.controls{display:flex;gap:10px;margin-top:12px}
button{
  padding:10px 14px;
  border-radius:999px;
  border:none;
  background:#8b5cf6;
  color:#fff;
  font-weight:800;
  cursor:pointer;
}
button.secondary{background:#ddd;color:#000}
.hidden{display:none}
.wordbank,.sentence{
  border:1px dashed #ccc;
  padding:10px;
  border-radius:12px;
  min-height:50px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.chip{
  padding:8px 12px;
  border-radius:999px;
  background:#eee;
  cursor:pointer;
  font-weight:700;
}
</style>
</head>

<body>
<div class="app">

<div class="card">
  <h1>Exerciții TOPIK</h1>
  <select id="type">
    <option value="quiz">KO → RO</option>
    <option value="particle">Particule</option>
    <option value="particle4">Particule multiple</option>
    <option value="conjug">Conjugări</option>
    <option value="puzzle">Puzzle</option>
  </select>
</div>

<div class="card">
  <div id="question" class="question"></div>
  <div id="sub" class="sub"></div>

  <div id="answers" class="answers"></div>

  <div id="puzzleArea" class="hidden">
    <div class="sub">Cuvinte</div>
    <div id="bank" class="wordbank"></div>
    <div class="sub">Propoziția ta</div>
    <div id="line" class="sentence"></div>
  </div>

  <div class="controls">
    <button id="check">Verifică</button>
    <button class="secondary" id="next">Next</button>
  </div>

  <div id="feedback" class="sub"></div>
</div>

</div>

<script>
/* ===== BĂNCI DATE (DEMO – POȚI EXTINDE) ===== */

const QUIZ = [
  {ko:"저는 학교에 가요.", ro:"Eu merg la școală."},
  {ko:"커피를 마셔요.", ro:"Beau cafea."}
];

const PARTICLE = [
  {q:"저__ 학생이에요.", opts:["은","는","이","가"], a:"는"},
  {q:"학교__ 가요.", opts:["에","에서","을"], a:"에"}
];

const PARTICLE4 = [
  {
    q:"저__ 학교__ 친구__ 만나요.",
    opts:["은","는","에","에서","을","를","와","과"],
    a:["는","에","를"]
  }
];

const CONJUG = [
  {q:"가다 → ?", opts:["가요","가세요","가고"], a:"가요"}
];

const PUZZLE = [
  {w:["저는","학교에","가요"], a:"저는 학교에 가요"}
];

/* ===== STATE ===== */
  let currentPuzzle = null;
  let idx=0, selected=null, built=[];

/* ===== ELEMENTE ===== */
const type=document.getElementById("type");
const qEl=document.getElementById("question");
const sub=document.getElementById("sub");
const ans=document.getElementById("answers");
const fb=document.getElementById("feedback");
const puzzle=document.getElementById("puzzleArea");
const bank=document.getElementById("bank");
const line=document.getElementById("line");

/* ===== RENDER ===== */
function render(){
  ans.innerHTML="";
  fb.textContent="";
  puzzle.classList.add("hidden");
  selected=null;
  built=[];

  if(type.value==="quiz"){
    const q=QUIZ[idx%QUIZ.length];
    qEl.textContent=q.ko;
    sub.textContent="Alege traducerea corectă";
    shuffle([q.ro,...QUIZ.map(x=>x.ro)]).slice(0,4).forEach(o=>btn(o,q.ro));
  }

  if(type.value==="particle"){
    const q=PARTICLE[idx%PARTICLE.length];
    qEl.textContent=q.q;
    sub.textContent="Alege particula";
    q.opts.forEach(o=>btn(o,q.a));
  }

  if(type.value==="particle4"){
    const q=PARTICLE4[idx%PARTICLE4.length];
    qEl.textContent=q.q;
    sub.textContent="Alege toate particulele corecte";
    q.opts.forEach(o=>btn(o,q.a));
  }

  if(type.value==="conjug"){
    const q=CONJUG[idx%CONJUG.length];
    qEl.textContent=q.q;
    sub.textContent="Alege conjugarea";
    q.opts.forEach(o=>btn(o,q.a));
  }

  if(type.value==="puzzle"){
    const p=PUZZLE[idx%PUZZLE.length];
    qEl.textContent="Aranjează propoziția";
    sub.textContent="";
    puzzle.classList.remove("hidden");
    shuffle(p.w).forEach(w=>{
      const c=document.createElement("div");
      c.className="chip";
      c.textContent=w;
      c.onclick=()=>{built.push(w);drawPuzzle()};
      bank.appendChild(c);
    });
  }
}

function btn(text,correct){
  const b=document.createElement("div");
  b.className="answer";
  b.textContent=text;
  b.onclick=()=>{
    selected=text;
    document.querySelectorAll(".answer").forEach(x=>x.classList.remove("selected"));
    b.classList.add("selected");
    if(Array.isArray(correct)){
      if(correct.includes(text)) b.classList.add("correct");
    }
  };
  ans.appendChild(b);
}

function drawPuzzle(){
  line.innerHTML="";
  built.forEach((w,i)=>{
    const c=document.createElement("div");
    c.className="chip";
    c.textContent=w;
    c.onclick=()=>{built.splice(i,1);drawPuzzle()};
    line.appendChild(c);
  });
}

document.getElementById("check").onclick=()=>{
  fb.textContent="✔ verificat";
};
document.getElementById("next").onclick=()=>{
  idx++; bank.innerHTML=""; render();
};
type.onchange=()=>{idx=0;bank.innerHTML="";render()};

function shuffle(a){return a.sort(()=>Math.random()-.5)}

render();
</script>
</body>
</html>
