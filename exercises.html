<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Raluca Korean — Exerciții</title>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(135deg,#090818,#071425);
  color:#f3f4ff;
}
.app{max-width:1000px;margin:0 auto;padding:20px}
.card{
  background:rgba(16,14,40,.75);
  border:1px solid rgba(255,255,255,.12);
  border-radius:20px;
  padding:18px;
  margin-bottom:18px;
}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.btn{
  padding:10px 16px;border-radius:999px;border:none;
  background:linear-gradient(135deg,#22d3ee,#7c3aed);
  font-weight:900;cursor:pointer;color:#0b071a;
}
.btn.ghost{background:transparent;color:#f3f4ff;border:1px solid rgba(255,255,255,.2)}
.pill{
  padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.2);
  cursor:pointer;font-weight:800
}
.pill.active{background:rgba(124,58,237,.25)}
.q{font-size:22px;font-weight:900;margin-bottom:12px}
.answers{display:grid;gap:10px}
.answer{
  padding:12px;border-radius:14px;
  border:1px solid rgba(255,255,255,.2);
  cursor:pointer;font-weight:900
}
.answer.correct{background:rgba(34,197,94,.2)}
.answer.wrong{background:rgba(239,68,68,.2)}
.answer.selected{outline:2px solid #22d3ee}
.helper{font-size:13px;color:rgba(243,244,255,.7)}
.puzzleBank,.puzzleLine{
  display:flex;gap:8px;flex-wrap:wrap;
  border:1px dashed rgba(255,255,255,.2);
  border-radius:14px;padding:10px;margin:10px 0
}
.chip{
  padding:8px 12px;border-radius:999px;
  background:rgba(34,211,238,.2);
  font-weight:900;cursor:pointer
}
</style>
</head>

<body>
<div class="app">

<div class="card">
  <h1>Exerciții</h1>
  <div class="row">
    <div class="pill active" onclick="setType('quiz')" id="pQuiz">Quiz</div>
    <div class="pill" onclick="setType('particle')">Particle</div>
    <div class="pill" onclick="setType('particlePlus')">Particle+</div>
    <div class="pill" onclick="setType('puzzle')">Puzzle</div>
    <div class="pill" onclick="setType('conjug')">Conjug</div>
    <div class="pill" onclick="setType('chain')">Chain</div>
  </div>
</div>

<div class="card">
  <div class="helper" id="helper"></div>
  <div class="q" id="question"></div>
  <div id="answers" class="answers"></div>

  <div id="puzzleUI" style="display:none">
    <div class="puzzleBank" id="bank"></div>
    <div class="puzzleLine" id="line"></div>
  </div>

  <div class="row">
    <button class="btn ghost" onclick="check()">Verifică</button>
    <button class="btn" onclick="next()">Următorul</button>
  </div>
</div>

</div>

<script>
/* =========================
   DATA (EXEMPLU)
========================= */
const DATA = {
  quiz:[
    {lessonId:"T1-01", q:"저는 학생이에요.", opts:["Sunt student.","Sunt profesor.","Sunt medic."], a:"Sunt student."}
  ],
  particle:[
    {lessonId:"T1-01", q:"저__ 학생이에요.", opts:["은","는","이","가"], a:"는"}
  ],
  particlePlus:[
    {lessonId:"T2-01", q:"저__ 학교__ 가요.", opts:["은","는","에","에서"], a:["는","에"]}
  ],
  puzzle:[
    {lessonId:"T1-01", w:["저는","학교에","가요"], a:"저는 학교에 가요"}
  ],
  conjug:[
    {lessonId:"T2-01", q:"먹다 → prezent", opts:["먹어요","먹었어요","먹을게요"], a:"먹어요"}
  ],
  chain:[
    {
      lessonId:"T3-01",
      particlePlus:{q:"비__ 와__ 늦었어요.",opts:["가","서","는","에"],a:["가","서"]},
      puzzle:{w:["비가","와서","늦었어요"],a:"비가 와서 늦었어요"},
      conjug:{q:"늦다 → trecut",opts:["늦어요","늦었어요","늦을 거예요"],a:"늦었어요"}
    }
  ]
};

/* =========================
   STATE
========================= */
let type="quiz";
let index=0;
let selected=null;
let built=[];
let chainStep=0;

/* =========================
   UI
========================= */
const q=document.getElementById("question");
const h=document.getElementById("helper");
const a=document.getElementById("answers");
const bank=document.getElementById("bank");
const line=document.getElementById("line");
const pUI=document.getElementById("puzzleUI");

/* =========================
   CORE
========================= */
function setType(t){
  type=t;
  index=0;chainStep=0;
  document.querySelectorAll(".pill").forEach(p=>p.classList.remove("active"));
  event.target.classList.add("active");
  render();
}

function resetUI(){
  q.textContent="";h.textContent="";a.innerHTML="";
  pUI.style.display="none";bank.innerHTML="";line.innerHTML="";
  selected=null;built=[];
}

function render(){
  resetUI();
  const arr=DATA[type];
  if(!arr||!arr.length){q.textContent="Nu există exerciții";return;}
  const d=arr[index%arr.length];

  if(type==="quiz") renderQuiz(d);
  if(type==="particle") renderParticle(d);
  if(type==="particlePlus") renderParticlePlus(d);
  if(type==="puzzle") renderPuzzle(d);
  if(type==="conjug") renderQuiz(d);
  if(type==="chain") renderChain(d);
}

function renderQuiz(d){
  q.textContent=d.q;
  h.textContent="Alege varianta corectă";
  d.opts.forEach(o=>{
    const el=document.createElement("div");
    el.className="answer";el.textContent=o;
    el.onclick=()=>{
      if(selected)return;
      selected=o;
      if(o===d.a) el.classList.add("correct");
      else el.classList.add("wrong");
      [...a.children].forEach(x=>{if(x.textContent===d.a)x.classList.add("correct")});
    };
    a.appendChild(el);
  });
}

function renderParticle(d){
  renderQuiz(d);
}

function renderParticlePlus(d){
  q.textContent=d.q;
  h.textContent="Alege TOATE corecte";
  d.opts.forEach(o=>{
    const el=document.createElement("div");
    el.className="answer";el.textContent=o;
    el.onclick=()=>el.classList.toggle("selected");
    a.appendChild(el);
  });
}

function renderPuzzle(d){
  q.textContent="Ordonează propoziția";
  pUI.style.display="block";
  d.w.forEach(w=>{
    const c=document.createElement("div");
    c.className="chip";c.textContent=w;
    c.onclick=()=>{built.push(w); redrawPuzzle()};
    bank.appendChild(c);
  });
}

function redrawPuzzle(){
  line.innerHTML="";
  built.forEach(w=>{
    const c=document.createElement("div");
    c.className="chip";c.textContent=w;
    line.appendChild(c);
  });
}

function renderChain(d){
  if(chainStep===0){renderParticlePlus(d.particlePlus);h.textContent="Pas 1 / 3";return;}
  if(chainStep===1){renderPuzzle(d.puzzle);h.textContent="Pas 2 / 3";return;}
  renderQuiz(d.conjug);h.textContent="Pas 3 / 3";
}

function check(){
  if(type==="particlePlus"){
    const picked=[...a.querySelectorAll(".selected")].map(x=>x.textContent);
    alert(JSON.stringify(picked));
  }
  if(type==="puzzle"){
    alert(built.join(" "));
  }
  if(type==="chain"){
    if(chainStep<2){chainStep++;render();}
  }
}

function next(){index++;chainStep=0;render();}

render();
</script>
</body>
</html>
