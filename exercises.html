<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Raluca Korean â€” ExerciÈ›ii</title>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(135deg,#090818,#071425);
  color:#f3f4ff;
}
.app{max-width:1000px;margin:0 auto;padding:20px}
.card{
  background:rgba(16,14,40,.75);
  border:1px solid rgba(255,255,255,.12);
  border-radius:20px;
  padding:18px;
  margin-bottom:18px;
}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.pill{
  padding:8px 14px;border-radius:999px;
  border:1px solid rgba(255,255,255,.2);
  cursor:pointer;font-weight:900
}
.pill.active{background:rgba(124,58,237,.3)}
.q{font-size:22px;font-weight:900;margin-bottom:12px}
.answers{display:grid;gap:10px}
.answer{
  padding:12px;border-radius:14px;
  border:1px solid rgba(255,255,255,.2);
  cursor:pointer;font-weight:900
}
.answer.correct{background:rgba(34,197,94,.25)}
.answer.wrong{background:rgba(239,68,68,.25)}
.answer.selected{outline:2px solid #22d3ee}
.helper{font-size:13px;color:rgba(243,244,255,.7)}
.puzzleBank,.puzzleLine{
  display:flex;gap:8px;flex-wrap:wrap;
  border:1px dashed rgba(255,255,255,.2);
  border-radius:14px;padding:10px;margin:10px 0
}
.chip{
  padding:8px 12px;border-radius:999px;
  background:rgba(34,211,238,.25);
  font-weight:900;cursor:pointer
}
.btn{
  padding:10px 16px;border-radius:999px;
  border:none;font-weight:900;cursor:pointer;
  background:linear-gradient(135deg,#22d3ee,#7c3aed);
  color:#0b071a
}
.btn.ghost{background:transparent;color:#f3f4ff;border:1px solid rgba(255,255,255,.2)}
.soundBtn{
  margin-left:auto;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.3);
  background:transparent;
  font-size:20px;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="app">

<div class="card">
  <div class="row">
    <h1>ExerciÈ›ii</h1>
    <button class="soundBtn" id="soundBtn">ðŸ”Š</button>
  </div>
  <div class="row">
    <div class="pill active" onclick="setType('quiz')">Quiz</div>
    <div class="pill" onclick="setType('particle')">Particle</div>
    <div class="pill" onclick="setType('particlePlus')">Particle+</div>
    <div class="pill" onclick="setType('puzzle')">Puzzle</div>
    <div class="pill" onclick="setType('conjug')">Conjug</div>
    <div class="pill" onclick="setType('chain')">Chain</div>
  </div>
</div>

<div class="card">
  <div class="helper" id="helper"></div>
  <div class="q" id="question"></div>
  <div id="answers" class="answers"></div>

  <div id="puzzleUI" style="display:none">
    <div class="puzzleBank" id="bank"></div>
    <div class="puzzleLine" id="line"></div>
  </div>

  <div class="row">
    <button class="btn ghost" onclick="check()">VerificÄƒ</button>
    <button class="btn" onclick="next()">UrmÄƒtorul</button>
  </div>
</div>

</div>

<script>
/* =========================
   SUNETE
========================= */
const SFX = {
  click:new Audio("click.mp3"),
  ok:new Audio("ok.mp3"),
  bad:new Audio("bad.mp3")
};
let soundOn=true;
soundBtn.onclick=()=>{soundOn=!soundOn;soundBtn.textContent=soundOn?"ðŸ”Š":"ðŸ”‡"};
const play=s=>{if(soundOn)SFX[s]?.play()};

/* =========================
   URL â†’ LECÈšIE
========================= */
const params=new URLSearchParams(location.search);
const activeLesson=params.get("lesson");

/* =========================
   DATA (SIMPLU EXEMPLU)
========================= */
const DATA={
quiz:[
 {lessonId:"T1-01",q:"ì €ëŠ” í•™ìƒì´ì—ìš”.",opts:["Sunt student.","Sunt profesor.","Sunt medic."],a:"Sunt student."}
],
particle:[
 {lessonId:"T1-01",q:"ì €__ í•™ìƒì´ì—ìš”.",opts:["ì€","ëŠ”","ì´","ê°€"],a:"ëŠ”"}
],
particlePlus:[
 {lessonId:"T2-01",q:"ì €__ í•™êµ__ ê°€ìš”.",opts:["ì€","ëŠ”","ì—","ì—ì„œ"],a:["ëŠ”","ì—"]}
],
puzzle:[
 {lessonId:"T1-01",w:["ì €ëŠ”","í•™êµì—","ê°€ìš”"],a:"ì €ëŠ” í•™êµì— ê°€ìš”"}
],
conjug:[
 {lessonId:"T2-01",q:"ë¨¹ë‹¤ â†’ prezent",opts:["ë¨¹ì–´ìš”","ë¨¹ì—ˆì–´ìš”","ë¨¹ì„ê²Œìš”"],a:"ë¨¹ì–´ìš”"}
],
chain:[
 {
  lessonId:"T3-01",
  particlePlus:{q:"ë¹„__ ì™€__ ëŠ¦ì—ˆì–´ìš”.",opts:["ê°€","ì„œ","ëŠ”","ì—"],a:["ê°€","ì„œ"]},
  puzzle:{w:["ë¹„ê°€","ì™€ì„œ","ëŠ¦ì—ˆì–´ìš”"],a:"ë¹„ê°€ ì™€ì„œ ëŠ¦ì—ˆì–´ìš”"},
  conjug:{q:"ëŠ¦ë‹¤ â†’ trecut",opts:["ëŠ¦ì–´ìš”","ëŠ¦ì—ˆì–´ìš”","ëŠ¦ì„ ê±°ì˜ˆìš”"],a:"ëŠ¦ì—ˆì–´ìš”"}
 }
]
};

/* =========================
   STATE
========================= */
let type="quiz",index=0,selected=null,built=[],chainStep=0;

/* =========================
   CORE
========================= */
const q=document.getElementById("question"),
h=document.getElementById("helper"),
a=document.getElementById("answers"),
bank=document.getElementById("bank"),
line=document.getElementById("line"),
pUI=document.getElementById("puzzleUI");

function setType(t){
 type=t;index=0;chainStep=0;
 document.querySelectorAll(".pill").forEach(p=>p.classList.remove("active"));
 event.target.classList.add("active");
 render();
}

function resetUI(){
 q.textContent="";h.textContent="";a.innerHTML="";
 pUI.style.display="none";bank.innerHTML="";line.innerHTML="";
 selected=null;built=[];
}

function getArr(){
 let arr=DATA[type]||[];
 if(activeLesson) arr=arr.filter(x=>x.lessonId===activeLesson);
 return arr;
}

function render(){
 resetUI();
 const arr=getArr();
 if(!arr.length){q.textContent="Nu existÄƒ exerciÈ›ii pentru aceastÄƒ lecÈ›ie.";return;}
 const d=arr[index%arr.length];

 if(type==="quiz"||type==="conjug") renderQuiz(d);
 if(type==="particle") renderQuiz(d);
 if(type==="particlePlus") renderParticlePlus(d);
 if(type==="puzzle") renderPuzzle(d);
 if(type==="chain") renderChain(d);
}

function renderQuiz(d){
 q.textContent=d.q;
 d.opts.forEach(o=>{
  const el=document.createElement("div");
  el.className="answer";el.textContent=o;
  el.onclick=()=>{
    if(selected)return;
    selected=o;play("click");
    if(o===d.a){el.classList.add("correct");play("ok")}
    else{el.classList.add("wrong");play("bad")}
    [...a.children].forEach(x=>{if(x.textContent===d.a)x.classList.add("correct")});
  };
  a.appendChild(el);
 });
}

function renderParticlePlus(d){
 q.textContent=d.q;
 h.textContent="Alege TOATE corecte";
 d.opts.forEach(o=>{
  const el=document.createElement("div");
  el.className="answer";el.textContent=o;
  el.onclick=()=>{el.classList.toggle("selected");play("click")};
  a.appendChild(el);
 });
}

function renderPuzzle(d){
 q.textContent="OrdoneazÄƒ propoziÈ›ia";
 pUI.style.display="block";
 d.w.forEach(w=>{
  const c=document.createElement("div");
  c.className="chip";c.textContent=w;
  c.onclick=()=>{built.push(w);play("click");redraw()};
  bank.appendChild(c);
 });
}
function redraw(){
 line.innerHTML="";
 built.forEach(w=>{
  const c=document.createElement("div");
  c.className="chip";c.textContent=w;
  line.appendChild(c);
 });
}

function renderChain(d){
 if(chainStep===0){renderParticlePlus(d.particlePlus);h.textContent="Pas 1 / 3";return;}
 if(chainStep===1){renderPuzzle(d.puzzle);h.textContent="Pas 2 / 3";return;}
 renderQuiz(d.conjug);h.textContent="Pas 3 / 3";
}

function check(){
 if(type==="chain"){chainStep++;render();return;}
}

function next(){index++;chainStep=0;render();}
render();
</script>
</body>
</html>
