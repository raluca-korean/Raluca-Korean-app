
<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Raluca Korean ‚Äî Exercises</title>
  <link rel="stylesheet" href="style.css" />
  <style>
  
    :root {  
      --bg: #f7f3ff;  
      --card-bg: #ffffff;  
      --accent: #c9b5ff;  
      --accent-strong: #9b7cff;  
      --text-main: #333333;  
      --text-soft: #666666;  
      --border: #e0d7ff;  
      --dimmed-bg: #f2eefc;  
      --overlay-bg: rgba(0, 0, 0, 0.2);  
    }  
    header{text-align:center;padding:4px 8px 4px;}  
    header h1{font-size:18px;margin:2px 0;font-weight:700;color:var(--accent-strong);}  
    header p{margin:0;font-size:11px;color:var(--text-soft);}  
  
    .screen{display:none;flex-direction:column;gap:10px;flex:1;min-height:0;}  
    .screen.active{display:flex;}  
  
    .mode-panel{  
      background:var(--card-bg);border-radius:12px;border:1px solid var(--border);  
      padding:6px 8px;font-size:11px;display:flex;flex-direction:column;gap:4px;  
      box-shadow:0 4px 12px rgba(120,96,190,0.08);  
    }  
    .mode-row{  
      display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;  
    }  
    .mode-row label{font-size:11px;display:flex;align-items:center;gap:4px;}  
    .part-toggles{display:flex;flex-wrap:wrap;gap:6px;}  
    .chip{  
      display:inline-flex;align-items:center;gap:3px;  
      padding:3px 8px;border-radius:999px;background:#ede7ff;color:var(--accent-strong);  
      font-size:10px;cursor:pointer;  
    }  
    .chip input{margin:0;}  
    .section-label{font-size:11px;font-weight:600;color:var(--accent-strong);margin-top:2px;}  
  
    .small-mode-btn{  
      padding:3px 8px;  
      font-size:10px;  
    }  
    .small-mode-btn.active{  
      background:var(--accent-strong);  
      color:#fff;  
    }  
  
    .table-block{  
      background:var(--card-bg);border-radius:14px;padding:8px;  
      box-shadow:0 6px 16px rgba(120,96,190,0.12);border:1px solid var(--border);  
      display:flex;flex-direction:column;gap:6px;flex:1;min-height:0;  
    }  
    .table-title{  
      font-size:11px;font-weight:600;color:var(--text-soft);  
      display:flex;justify-content:space-between;align-items:center;  
    }  
    .table-horizontal{  
      display:flex;flex-direction:row;overflow-x:auto;padding-bottom:4px;gap:6px;  
    }  
    .col{  
      min-width:110px;max-width:140px;flex:0 0 auto;background:#faf8ff;border-radius:10px;  
      border:1px solid var(--border);display:flex;flex-direction:column;  
      padding:6px 6px 8px;transition:0.2s;cursor:pointer;  
      touch-action:manipulation;  
    }  
    .col-header{  
      font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:0.06em;  
      color:var(--accent-strong);margin-bottom:4px;border-bottom:1px solid var(--border);  
      padding-bottom:3px;  
    }  
    /* Header de coloanƒÉ cu titlu + bifƒÉ ON/OFF */  
.col-header{  
  display:flex;  
  align-items:center;  
  justify-content:space-between;  
  gap:4px;  
}  
  
.col-header input.col-toggle{  
  width:14px;  
  height:14px;  
  accent-color: var(--accent-strong);  
  flex-shrink:0;  
}  
    .col-body-label{font-size:10px;color:var(--text-soft);margin-bottom:2px;}  
    .col-body-main{font-size:15px;font-weight:600;margin-bottom:2px;}  
    .col-body-extra{font-size:11px;color:var(--text-soft);}  
    .dimmed{  
      opacity:0.35;background-image:repeating-linear-gradient(  
        -45deg,var(--dimmed-bg),var(--dimmed-bg) 4px,#fdfbff 4px,#fdfbff 8px  
      );  
    }  
  
    .controls{  
      display:flex;justify-content:space-between;align-items:center;gap:8px;  
      padding-top:4px;border-top:1px dashed var(--border);  
    }  
    .btn-group{display:flex;gap:6px;}  
    button{  
      border-radius:999px;border:none;padding:6px 10px;font-size:12px;font-weight:600;  
      cursor:pointer;background:var(--accent);color:#fff;display:inline-flex;  
      align-items:center;gap:4px;box-shadow:0 2px 6px rgba(90,70,160,0.25);  
    }  
    button.secondary{background:#ede7ff;color:var(--accent-strong);box-shadow:none;}  
    button:disabled{opacity:0.4;box-shadow:none;cursor:default;}  
    .page-indicator{font-size:11px;color:var(--text-soft);}  
    .legend{font-size:10px;color:var(--text-soft);text-align:center;padding:2px 4px 0;}  
    .hidden{display:none !important;}  
  
    .preview-card{  
      margin-top:6px;padding:8px;border-radius:12px;  
      background:#f9f7ff;border:1px solid var(--border);  
      display:flex;flex-direction:column;gap:4px;  
    }  
    .preview-title{  
      font-size:11px;font-weight:600;color:var(--accent-strong);  
      display:flex;justify-content:space-between;align-items:center;  
    }  
    .preview-ko{  
      font-size:14px;font-weight:600;margin-top:2px;  
    }  
    .preview-ro{  
      font-size:12px;color:var(--text-soft);  
    }  
    .preview-natural{  
      font-size:11px;  
      color:#8e6cff;  
      margin-top:2px;  
    }  
    .preview-buttons{  
      display:flex;gap:6px;margin-top:4px;flex-wrap:wrap;  
    }  
    
    
    .overlay{  
      position:fixed;inset:0;background:var(--overlay-bg);  
      display:flex;justify-content:center;align-items:flex-end;z-index:1000;  
    }  
    .panel{  
      width:100%;max-width:900px;background:var(--card-bg);  
      border-radius:18px 18px 0 0;box-shadow:0 -6px 18px rgba(0,0,0,0.15);  
      padding:10px 12px 14px;animation:slideUp 0.18s ease-out;  
    }  
    @keyframes slideUp{  
      from{transform:translateY(40px);opacity:0;}  
      to{transform:translateY(0);opacity:1;}  
    }  
    .panel-header{  
      display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;  
    }  
    .panel-title{font-size:13px;font-weight:600;color:var(--accent-strong);}  
    .panel-sub{font-size:11px;color:var(--text-soft);}  
    .panel-close{  
      background:transparent;color:var(--text-soft);box-shadow:none;  
      padding:4px 6px;font-size:14px;  
    }  
    .panel-input-row{display:flex;gap:6px;margin-bottom:6px;}  
    .panel-input-row input{  
      flex:1;border-radius:999px;border:1px solid var(--border);  
      padding:6px 10px;font-size:12px;  
    }  
    .panel-list{  
      max-height:260px;overflow-y:auto;border-radius:10px;  
      border:1px solid var(--border);background:#faf8ff;padding:4px;  
    }  
    .panel-item{  
      padding:4px 8px;border-radius:8px;display:flex;justify-content:space-between;  
      align-items:center;font-size:13px;cursor:pointer;  
    }  
    .panel-item:hover{background:#ede7ff;}  
    .panel-item-main{font-weight:600;}  
    .panel-item-extra{  
      display:flex;flex-direction:column;align-items:flex-end;gap:2px;  
    }  
    .panel-item-tag{font-size:10px;color:var(--accent-strong);}  
  
    .bottom-nav{  
      position:fixed;bottom:0;left:0;right:0;  
      background:#ffffffee;border-top:1px solid var(--border);  
      display:flex;justify-content:space-around;align-items:center;  
      padding:6px 0;backdrop-filter:blur(8px);z-index:500;  
    }  
    .nav-btn{  
      flex:1;text-align:center;border:none;background:transparent;  
      font-size:11px;color:var(--text-soft);padding:4px 0;cursor:pointer;  
      display:flex;flex-direction:column;align-items:center;gap:2px;  
    }  
    .nav-btn span.icon{font-size:18px;}  
    .nav-btn.active{color:var(--accent-strong);font-weight:600;}  
    .nav-btn.active span.icon{transform:translateY(-1px);}  
    @media (max-width:600px){  
      header h1{font-size:16px;}  
      .col{min-width:95px;}  
    }  
  
    .card{  
      background:var(--card-bg);border-radius:14px;padding:10px;  
      box-shadow:0 4px 12px rgba(120,96,190,0.12);border:1px solid var(--border);  
      display:flex;flex-direction:column;gap:6px;  
    }  
    .card h2{  
      margin:0;font-size:14px;color:var(--accent-strong);  
    }  
    .small-label{font-size:11px;color:var(--text-soft);}  
    select{  
      border-radius:999px;border:1px solid var(--border);  
      padding:4px 10px;font-size:12px;background:#fff;  
    }  
    .lesson-header{  
  margin-bottom: 8px;  
}  
    .exercise-question{  
      font-size:14px;font-weight:600;margin-top:4px;  
    }  
    .exercise-options{display:flex;flex-direction:column;gap:4px;margin-top:2px;}  
    .exercise-options label{  
      font-size:13px;display:flex;align-items:center;gap:6px;  
    }  
    .exercise-feedback{  
      font-size:12px;margin-top:4px;  
    }  
/* ===== EXERCI»öII TOPIK ‚Äì stil "app" ===== */  
  
#screen-exercises .card.ex-card{  
  display:flex;  
  flex-direction:column;  
  gap:10px;  
  padding:12px 14px 14px;  
}  
  
/* header de card */  
.ex-header-row{  
  display:flex;  
  justify-content:space-between;  
  align-items:flex-start;  
  gap:8px;  
}  
  
.ex-header-row h2{  
  margin:2px 0 0;  
  font-size:15px;  
  letter-spacing:0.04em;  
  text-transform:uppercase;  
  color:var(--accent-strong);  
}  
  
.ex-pill{  
  display:inline-flex;  
  align-items:center;  
  padding:2px 8px;  
  font-size:10px;  
  border-radius:999px;  
  background:rgba(111,134,168,0.12);  
  color:var(--accent-strong);  
  margin-bottom:2px;  
}  
  
.ex-mini-hint{  
  font-size:11px;  
  color:var(--text-soft);  
  text-align:right;  
}  
/* stare implicitƒÉ ‚Äî text discret */  
#screen-exercises .exercise-question.empty {  
  color: var(--text-soft);  
  font-weight: 400;  
}  
    /* linia cu select-ul */  
.ex-type-row{  
  margin-top:6px;  
  padding:8px 10px;  
  border-radius:12px;  
  background:rgba(255,255,255,0.7);  
  border:1px solid rgba(227,218,203,0.9);  
  display:flex;  
  align-items:center;  
  justify-content:space-between;  
  gap:8px;  
  flex-wrap:wrap;  
}  
  
.ex-type-left{  
  display:flex;  
  flex-direction:column;  
  gap:2px;  
}  
  
.ex-type-chip{  
  font-size:11px;  
  padding:2px 8px;  
  border-radius:999px;  
  background:rgba(241,211,160,0.22);  
  color:#6f5430;  
}  
  
/* card interior cu √Æntrebarea */  
.ex-question-shell{  
  margin-top:6px;  
  padding:10px 12px 12px;  
  border-radius:16px;  
  background:linear-gradient(145deg,#fdfbf7,#f0ebe3);  
  border:1px solid rgba(227,218,203,0.9);  
  box-shadow:0 8px 18px rgba(80,64,48,0.12);  
  display:flex;  
  flex-direction:column;  
  gap:6px;  
}  
  
/* tag-uri de sus */  
.ex-question-tag-row{  
  display:flex;  
  justify-content:space-between;  
  align-items:center;  
  gap:6px;  
}  
  
.ex-question-tag{  
  font-size:11px;  
  font-weight:600;  
  padding:2px 8px;  
  border-radius:999px;  
  background:rgba(111,134,168,0.15);  
  color:var(--accent-strong);  
}  
  
.ex-question-subtag{  
  font-size:11px;  
  color:var(--text-soft);  
}  
  
/* text √Æntrebare mai mare */  
#screen-exercises .exercise-question{  
  font-size:15px;  
  font-weight:600;  
  margin-top:4px;  
}  
  
/* op»õiuni ‚Äì arate ca ni»ôte carduri */  
#screen-exercises .exercise-options label{  
  padding:6px 8px;  
  border-radius:12px;  
  border:1px solid var(--border);  
  background:#fbf8f1;  
  box-shadow:0 3px 8px rgba(90,72,52,0.06);  
}  
  
/* butoane aliniate jos */  
.ex-buttons{  
  margin-top:4px;  
  justify-content:flex-end;  
}  
  
/* feedback */  
#screen-exercises .exercise-feedback{  
  margin-top:2px;  
  font-size:12px;  
  min-height:18px;  
}  
  
/* legendƒÉ jos pentru Exerci»õii ‚Äì reactivƒÉm .legend aici */  
#screen-exercises .ex-legend{  
  display:block;  
  margin-top:8px;  
  padding:6px 8px;  
  border-radius:10px;  
  background:rgba(0,0,0,0.02);  
  font-size:10px;  
  color:var(--text-soft);  
}  
    .glossary-search{  
      display:flex;gap:6px;align-items:center;margin-top:4px;  
    }  
    .glossary-search input{  
      flex:1;border-radius:999px;border:1px solid var(--border);  
      padding:6px 10px;font-size:12px;  
    }  
    textarea{  
  width:100%;  
  border-radius:14px;  
  border:1px solid var(--border);  
  background:#fff;  
  padding:10px 12px;  
  font-size:13px;  
  line-height:1.35;  
  color:var(--text-main);  
  outline:none;  
  resize:vertical;  
  min-height:72px;  
  box-shadow:0 2px 10px rgba(120,96,190,0.06) inset;  
}  
  
textarea::placeholder{  
  color:#9a93b8;  
}  
  
textarea:focus{  
  border-color:var(--accent-strong);  
  box-shadow:0 0 0 3px rgba(155,124,255,0.18);  
}  
    .glossary-list{  
      margin-top:6px;max-height:260px;overflow-y:auto;padding-right:2px;  
    }  
    .glossary-item{  
      padding:6px 8px;border-radius:10px;border:1px solid var(--border);  
      background:#faf8ff;margin-bottom:4px;font-size:12px;  
      display:flex;justify-content:space-between;gap:8px;  
    }  
    .glossary-ko{font-weight:600;}  
    .glossary-ro{color:var(--text-soft);}  
    .glossary-cat{font-size:10px;color:var(--accent-strong);}  
  
    .fav-list{  
      margin-top:4px;max-height:140px;overflow-y:auto;padding-right:2px;  
    }  
    .fav-item{  
      padding:4px 6px;border-radius:8px;border:1px solid var(--border);  
      background:#fdfbff;margin-bottom:4px;font-size:11px;  
    }  
    .fav-ko{font-weight:600;margin-bottom:2px;}  
    .fav-ro{color:var(--text-soft);}  
    /* CARD GENERAL ‚Äì Rom√¢nƒÉ ‚Üí CoreeanƒÉ, Exerci»õii, Glosar */  
.card{  
  background: linear-gradient(145deg, #ffffff, #f5f0ff);  
  border-radius: 18px;  
  padding: 12px 14px;  
  box-shadow: 0 10px 24px rgba(120,96,190,0.18);  
  border: 1px solid rgba(201,181,255,0.6);  
}  
  
/* Titlurile cardurilor */  
.card h2{  
  margin: 0 0 6px;  
  font-size: 15px;  
  font-weight: 700;  
  color: #7b5fff;  
  letter-spacing: 0.03em;  
}  
  
/* Textarea rom√¢nƒÉ */  
textarea#roInput{  
  border-radius: 14px;  
  border: 1px solid #d7c9ff;  
  background: #fbf9ff;  
  padding: 10px 12px;  
  font-size: 13px;  
  line-height: 1.45;  
  box-shadow: 0 0 0 1px rgba(255,255,255,0.7);  
}  
  
/* Buton ‚ÄûTradu √Æn coreeanƒÉ‚Äù */  
#roTranslateBtn{  
  margin-top: 6px;  
  border-radius: 999px;  
  padding: 7px 14px;  
  font-size: 12px;  
  font-weight: 600;  
  background: linear-gradient(120deg, #b391ff, #8a6bff);  
  color: #fff;  
  border: none;  
  box-shadow: 0 6px 14px rgba(125,99,210,0.35);  
}  
#roTranslateBtn{  
  display:inline-flex;  
  align-items:center;  
  justify-content:center;  
  gap:6px;  
}  
  
.translate-icon{  
  font-size:14px;  
  transform:translateY(0.5px);  
}  
    /* Rezultat KO + rom√¢na corectatƒÉ */  
#roToKoResult{  
  margin-top: 8px;  
  font-size: 15px;  
  font-weight: 700;  
  color: #3a295d;  
}  
  
#roCorrected{  
  margin-top: 2px;  
  font-size: 12px;  
  color: #7b7496;  
}  
  
/* Coloanele SUBJ/TIME/PLACE etc. */  
.col{  
  min-width: 110px;  
  max-width: 140px;  
  flex: 0 0 auto;  
  background: radial-gradient(circle at top left,#fdfbff,#f1ecff);  
  border-radius: 14px;  
  border: 1px solid #ddd2ff;  
  padding: 7px 7px 9px;  
  box-shadow: 0 6px 16px rgba(118,95,205,0.16);  
  transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s;  
}  
  
/* Efect la tap / hover (desktop) */  
.col:active,  
.col:hover{  
  transform: translateY(-1px);  
  box-shadow: 0 9px 20px rgba(118,95,205,0.24);  
  border-color: #b09bff;  
}  
  
/* Headerul coloanei */  
.col-header{  
  font-size: 10px;  
  font-weight: 700;  
  text-transform: uppercase;  
  letter-spacing: 0.08em;  
  color: #9a80ff;  
  margin-bottom: 3px;  
  border-bottom: 1px solid rgba(208,196,255,0.8);  
  padding-bottom: 2px;  
}  
  
/* Cuv√¢ntul ales √Æn coloanƒÉ */  
.col-body-main{  
  font-size: 15px;  
  font-weight: 700;  
  color: #372449;  
}  
  
/* Hintul gri mic din coloanƒÉ */  
.col-body-label{  
  font-size: 10px;  
  color: #8a849d;  
}  
  
/* Propozi»õia KO mare de jos */  
#previewKo{  
  font-size: 16px;  
  font-weight: 700;  
  color: #2f2948;  
}  
  
/* Traducere rom√¢nƒÉ */  
#previewRo{  
  font-size: 12px;  
  color: #746f91;  
}  
  
/* Badge ‚Äûnatural‚Äù / aten»õionare */  
#naturalHint{  
  font-size: 11px;  
  margin-top: 3px;  
}  
  
    /* =========================================================  
   THEME v4 ‚Äì ‚Äûapp desenatƒÉ‚Äù pentru Raluca  
   ‚Äì forme de fundal + iconi»õe pe coloane + carduri ilustrate  
   (se pune ULTIMUL √Æn <style>)  
========================================================= */  
  
/* fundal cu ‚Äûbule‚Äù moi */  
body{  
  background-color:#f4efe4;  
  background-image:  
    radial-gradient(circle at 10% 0%, rgba(255,255,255,0.9) 0, rgba(255,255,255,0) 45%),  
    radial-gradient(circle at 90% 0%, rgba(191,208,222,0.55) 0, rgba(191,208,222,0) 55%),  
    radial-gradient(circle at 0% 80%, rgba(198,189,171,0.55) 0, rgba(198,189,171,0) 45%),  
    radial-gradient(circle at 80% 100%, rgba(180,205,187,0.55) 0, rgba(180,205,187,0) 50%);  
}  
  
/* header cu ‚ÄûbandƒÉ‚Äù de app */  
header{  
  position:relative;  
  padding:10px 10px 14px;  
}  
header::before{  
  content:"";  
  position:absolute;  
  inset:0 8px auto;  
  height:60px;  
  border-radius:22px;  
  background:linear-gradient(120deg,#fdfbf7,#e4eaf3);  
  box-shadow:0 14px 30px rgba(120,111,90,0.18);  
  z-index:-1;  
}  
header h1{  
  font-size:17px;  
  letter-spacing:0.12em;  
  text-transform:uppercase;  
}  
header p{  
  font-size:11px;  
}  
  
/* mic ‚Äûbadge‚Äù versiune */  
header p::after{  
  content:"v2.0";  
  display:inline-flex;  
  align-items:center;  
  justify-content:center;  
  margin-left:6px;  
  padding:2px 8px;  
  border-radius:999px;  
  font-size:9px;  
  font-weight:600;  
  background:rgba(75,104,127,0.09);  
  color:#4b687f;  
}  
  
/* carduri cu ornament √Æn col»õ */  
.card,  
.table-block,  
.preview-card{  
  position:relative;  
  overflow:hidden;  
}  
.card::before,  
.table-block::before,  
.preview-card::before{  
  content:"";  
  position:absolute;  
  right:-32px;  
  top:-32px;  
  width:90px;  
  height:90px;  
  border-radius:50%;  
  background:radial-gradient(circle at 30% 30%,rgba(255,255,255,0.9),rgba(178,193,209,0.15));  
  pointer-events:none;  
}  
.card::after,  
.table-block::after,  
.preview-card::after{  
  content:"";  
  position:absolute;  
  left:-26px;  
  bottom:-26px;  
  width:70px;  
  height:70px;  
  border-radius:50%;  
  background:radial-gradient(circle at 70% 70%,rgba(255,255,255,0.95),rgba(198,188,166,0.15));  
  pointer-events:none;  
}  
  
/* con»õinutul cardurilor sƒÉ rƒÉm√¢nƒÉ deasupra ornamentelor */  
.card > *,  
.table-block > *,  
.preview-card > *{  
  position:relative;  
  z-index:1;  
}  
  
/* titluri card cu barƒÉ sub»õire dedesubt */  
.card h2{  
  position:relative;  
  padding-bottom:4px;  
}  
.card h2::after{  
  content:"";  
  position:absolute;  
  left:0;  
  bottom:0;  
  width:42px;  
  height:2px;  
  border-radius:999px;  
  background:linear-gradient(90deg,rgba(75,104,127,0.65),rgba(255,255,255,0));  
}  
  
/* chips ‚Äì mai ‚Äûtablete‚Äù */  
.chip{  
  position:relative;  
  padding:4px 10px 4px 8px;  
}  
.chip::before{  
  content:"";  
  width:6px;  
  height:6px;  
  border-radius:50%;  
  background:#c3b08f;  
}  
  
/* ========= ICONI»öE PE COLOANE (SUBJECT/TIME/PLACE etc.) ========= */  
  
.col-header{  
  display:flex;  
  align-items:center;  
  gap:4px;  
}  
  
/* icon placeholder */  
.col-header::before{  
  content:"";  
  display:inline-flex;  
  align-items:center;  
  justify-content:center;  
  width:16px;  
  height:16px;  
  border-radius:6px;  
  background:rgba(255,255,255,0.8);  
  font-size:11px;  
  box-shadow:0 1px 3px rgba(0,0,0,0.06);  
}  
  
/* SUBJ üë§ */  
.col[data-key="subject"] .col-header::before{  
  content:"üë§";  
}  
/* TIME ‚è∞ */  
.col[data-key="time"] .col-header::before{  
  content:"‚è∞";  
}  
/* PLACE üìç */  
.col[data-key="place"] .col-header::before{  
  content:"üìç";  
}  
/* MOD ‚ú® */  
.col[data-key="mod"] .col-header::before{  
  content:"‚ú®";  
}  
/* OBJECT üéØ */  
.col[data-key="object"] .col-header::before{  
  content:"üéØ";  
}  
/* NUMERAL #Ô∏è‚É£ */  
.col[data-key="numeral"] .col-header::before{  
  content:"#Ô∏è‚É£";  
}  
/* COUNTER üî¢ */  
.col[data-key="counter"] .col-header::before{  
  content:"üî¢";  
}  
/* VERB üöÄ */  
.col[data-key="verb"] .col-header::before{  
  content:"üöÄ";  
}  
/* CONJUGƒÇRI üîó */  
.col[data-key="conjug"] .col-header::before{  
  content:"üîó";  
}  
  
/* c√¢nd coloana e ‚ÄûstinsƒÉ‚Äù (dimmed) ‚Äì iconi»õa devine gri */  
.col.dimmed .col-header::before{  
  filter:grayscale(0.9);  
  opacity:0.6;  
}  
  
/* ========= ACCENTE DIFERITE PE FIECARE ECRAN ========= */  
  
/* üèó Builder ‚Äì bandƒÉ sus de sec»õiune */  
#screen-builder .mode-panel{  
  border-top:3px solid rgba(186,166,126,0.85);  
}  
#screen-builder .preview-title span:first-child::before{  
  content:"üèó ";  
}  
  
/* üìù Exerci»õii ‚Äì bandƒÉ albastrƒÉ */  
#screen-exercises .card{  
  border-top:3px solid rgba(118,147,183,0.95);  
}  
#screen-exercises h2::before{  
  content:"üìù ";  
}  
  
/* üìö Glosar ‚Äì bandƒÉ verde salvie */  
#screen-glossary > .card{  
  border-top:3px solid rgba(138,170,142,0.95);  
}  
#screen-glossary h2::before{  
  content:"üìö ";  
}  
  
/* lista de glosar ‚Äì ‚Äûfi»ôe‚Äù */  
.glossary-item{  
  background:rgba(255,255,255,0.9);  
  box-shadow:0 6px 14px rgba(153,141,120,0.16);  
}  
  
/* card ‚Äû3 cuvinte/zi‚Äù ‚Äì mic timeline √Æn lateral */  
#dailyWordsBox > div{  
  position:relative;  
}  
#dailyWordsBox > div::before{  
  content:"";  
  position:absolute;  
  left:-10px;  
  top:10px;  
  width:3px;  
  height:60%;  
  border-radius:999px;  
  background:linear-gradient(to bottom,#9db8a3,#f4efe4);  
}  
  
/* ========= NAV BAR ‚Äì iconi»õe accentuate ========= */  
  
.bottom-nav{  
  border-top:1px solid rgba(205,195,176,0.8);  
}  
.nav-btn span.icon{  
  font-size:19px;  
}  
.nav-btn.active span.icon{  
  transform:translateY(-2px) scale(1.06);  
}  
  
/* ========= PREVIEW propozi»õie ========= */  
  
.preview-card{  
  margin-top:10px;  
}  
.preview-title span:first-child{  
  display:flex;  
  align-items:center;  
  gap:6px;  
}  
.preview-title span:first-child::before{  
  content:"üîä";  
  width:18px;  
  height:18px;  
  border-radius:50%;  
  display:inline-flex;  
  align-items:center;  
  justify-content:center;  
  font-size:11px;  
  background:rgba(75,104,127,0.08);  
}  
  
/* hint naturalitate ‚Äì ‚Äûbadge‚Äù */  
.preview-natural{  
  padding:4px 8px;  
  border-radius:999px;  
  display:inline-block;  
  background:rgba(185,207,192,0.35);  
}  
  
/* overlay panel ‚Äì divider subtil sus */  
.panel-header{  
  border-bottom:1px solid rgba(222,214,200,0.9);  
  padding-bottom:6px;  
}  
    /* === THEME A ‚Äì Korean Minimal Chic & Cozy === */  
  
:root{  
  --bg: #f6f1e8;  
  --card-bg: #fdfbf7;  
  --accent: #6f86a8;          /* albastru-cernealƒÉ */  
  --accent-strong: #4b607d;   /* albastru √Ænchis */  
  --accent-soft: #f1d3a0;     /* auriu cald */  
  --text-main: #2f343b;  
  --text-soft: #7a8088;  
  --border: #e3dacb;  
  --dimmed-bg: #f0e6d7;  
  --overlay-bg: rgba(40,32,24,0.25);  
}  
  
/* fundal general ‚Äì crem cald, tip ‚Äûcafea cu lapte‚Äù */  
body{  
  margin:0;  
  padding:0;  
  font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;  
  background:  
    radial-gradient(circle at top,#fbf4e8 0,#f0ebe3 40%,#e9e2d7 100%);  
  color:var(--text-main);  
}  
  
/* containerul aplica»õiei ‚Äì u»ôor ‚Äûcard‚Äù pe mijloc */  
.app{  
  max-width:1040px;  
  margin:0 auto;  
  padding:18px 14px calc(70px + env(safe-area-inset-bottom));  
}  
/* header ‚Äì mai ‚Äûbrand‚Äù »ôi mai premium */  
header{  
  padding:6px 10px 10px;  
  text-align:left;  
}  
header h1{  
  font-size:18px;  
  font-weight:700;  
  letter-spacing:0.03em;  
  text-transform:uppercase;  
  color:var(--accent-strong);  
  display:flex;  
  align-items:center;  
  gap:6px;  
}  
header h1::before{  
  content:"‚úçÔ∏è";  
  font-size:16px;  
}  
header p{  
  margin:2px 0 0;  
  font-size:12px;  
  color:var(--text-soft);  
}  
  
/* carduri mari ‚Äì efect de planner premium */  
.card,  
.table-block,  
.preview-card{  
  background:linear-gradient(145deg,#fdfbf7,#f4eee3);  
  border-radius:18px;  
  border:1px solid rgba(227,218,203,0.9);  
  box-shadow:0 14px 30px rgba(80,64,48,0.12);  
}  
  
/* card standard (Rom√¢nƒÉ ‚Üí CoreeanƒÉ, Exerci»õii, Glosar) */  
.card{  
  padding:12px 14px;  
}  
.card h2{  
  font-size:15px;  
  color:var(--accent-strong);  
  letter-spacing:0.04em;  
}  
  
/* bara de introducere propozi»õie */  
textarea#roInput{  
  background:#fbf8f1;  
  border:1px solid #e1d5c5;  
  box-shadow:0 0 0 1px rgba(255,255,255,0.7);  
}  
  
/* buton mare ‚ÄûTradu √Æn coreeanƒÉ‚Äù */  
#roTranslateBtn{  
  background:linear-gradient(115deg,#4b607d,#6f86a8);  
  box-shadow:0 8px 18px rgba(75,96,125,0.35);  
}  
  
/* bara albastrƒÉ lungƒÉ (Tradu / Next etc.) */  
button{  
  border-radius:999px;  
  border:none;  
  padding:7px 14px;  
  font-size:12px;  
  font-weight:600;  
  cursor:pointer;  
  background:linear-gradient(120deg,#4b607d,#6f86a8);  
  color:#fff;  
  box-shadow:0 8px 18px rgba(75,96,125,0.32);  
}  
button.secondary{  
  background:#f3ebdd;  
  color:var(--accent-strong);  
  box-shadow:none;  
}  
button:disabled{  
  opacity:0.45;  
  box-shadow:none;  
}  
  
/* toggle-urile SUBJECT / TIME / ... ‚Äì chip-uri mai elegante */  
.chip{  
  background:#f4ece0;  
  color:var(--accent-strong);  
  border-radius:999px;  
  padding:4px 10px;  
  box-shadow:0 4px 8px rgba(180,162,136,0.25);  
}  
.chip input{  
  accent-color:var(--accent-strong);  
}  
  
/* coloanele din tabel (SUBJECT / TIME / PLACE etc.) */  
.col{  
  background:radial-gradient(circle at top left,#fdfbf7,#f2ebde);  
  border-radius:16px;  
  border:1px solid #e2d7c8;  
  box-shadow:0 10px 22px rgba(95,78,58,0.16);  
  transform:translateY(0);  
  transition:  
    transform 0.15s ease,  
    box-shadow 0.15s ease,  
    border-color 0.15s ease,  
    background 0.15s ease;  
}  
.col-header{  
  color:var(--accent-strong);  
}  
.col-body-main{  
  color:#2f343b;  
}  
.col-body-label{  
  color:#938777;  
}  
.col:hover{  
  transform:translateY(-1px);  
  box-shadow:0 14px 28px rgba(95,78,58,0.24);  
  border-color:#d0c1aa;  
}  
  
/* c√¢nd coloana e dezactivatƒÉ */  
.col.dimmed{  
  opacity:0.4;  
  background-image:none;  
  background:#f1e7d8;  
}  
  
/* cardul de preview propozi»õie de jos */  
.preview-card{  
  margin-top:10px;  
  padding:10px 12px;  
}  
.preview-title span{  
  color:var(--accent-strong);  
}  
.preview-ko{  
  font-size:16px;  
  font-weight:700;  
  color:#292f35;  
}  
.preview-ro{  
  font-size:12px;  
  color:var(--text-soft);  
}  
.preview-natural{  
  color:#a97a2e; /* un auriu cald pentru mesajele de naturalitate */  
}  
  
/* legendƒÉ explicativƒÉ */  
.legend{  
  font-size:10px;  
  color:#8b8476;  
}  
  
/* navbar-ul de jos ‚Äì barƒÉ de sticlƒÉ caldƒÉ */  
.bottom-nav{  
  background:rgba(248,242,233,0.96);  
  border-top:1px solid #e1d7c7;  
  backdrop-filter:blur(14px);  
}  
.nav-btn{  
  color:#8b8476;  
}  
.nav-btn.active{  
  color:var(--accent-strong);  
}  
.nav-btn span.icon{  
  font-size:18px;  
}  
  
/* panelul de overlay (lista de cuvinte) ‚Äì ca un sertar de lemn deschis */  
.panel{  
  background:linear-gradient(145deg,#fdfbf7,#f2ebde);  
  border-radius:20px 20px 0 0;  
  border:1px solid #e1d7c7;  
}  
.panel-item{  
  border-radius:12px;  
}  
.panel-item:hover{  
  background:#f3ebdd;  
}  
    /* === Stepper 3 pa»ôi (Builder) === */  
  
.builder-steps{  
  display:flex;  
  flex-wrap:wrap;  
  gap:6px;  
  margin:4px 0 10px;  
  font-size:11px;  
  color:var(--text-soft);  
}  
  
.builder-step{  
  display:flex;  
  align-items:center;  
  gap:6px;  
  padding:4px 8px;  
  border-radius:999px;  
  background:rgba(255,255,255,0.7);  
  border:1px solid var(--border);  
  box-shadow:0 2px 6px rgba(80,64,48,0.10);  
}  
  
.builder-step-number{  
  width:16px;  
  height:16px;  
  border-radius:999px;  
  display:flex;  
  align-items:center;  
  justify-content:center;  
  font-size:10px;  
  font-weight:700;  
  background:var(--accent-strong);  
  color:#fff;  
}  
  
.builder-step-text{  
  white-space:nowrap;  
}  
  
/* pasul curent (1) eviden»õiat pu»õin mai mult */  
.builder-step.active{  
  background:#fff7e4;  
  border-color:var(--accent-soft);  
}  
    /* === HEADER BRAND + TABS DE CAIET === */  
  
/* header general */  
.rk-header{  
  padding:8px 10px 12px;  
  display:flex;  
  flex-direction:column;  
  gap:4px;  
}  
  
.rk-header-main{  
  display:flex;  
  align-items:center;  
  justify-content:space-between;  
  gap:10px;  
}  
  
.rk-header-main h1{  
  margin:0;  
  font-size:20px;  
  font-weight:700;  
  letter-spacing:0.06em;  
  text-transform:uppercase;  
  color:var(--accent-strong);  
}  
  
/* badge mic l√¢ngƒÉ titlu ‚Äì aratƒÉ ca o etichetƒÉ de agendƒÉ */  
.rk-badge{  
  font-size:11px;  
  font-weight:600;  
  padding:4px 9px;  
  border-radius:999px;  
  background:linear-gradient(120deg,#f1d3a0,#f6e3b9);  
  color:#514029;  
  border:1px solid rgba(210,175,112,0.7);  
  box-shadow:0 4px 10px rgba(185,145,84,0.25);  
}  
  
/* subtitlu */  
.rk-header #subtitle{  
  margin:0;  
  font-size:12px;  
  color:var(--text-soft);  
}  
  
/* ===== TAB-URI DE JOS ‚Äì FILE DE CAIET ===== */  
  
.bottom-nav{  
  position:fixed;  
  inset-inline:0;  
  bottom:0;  
  display:flex;  
  justify-content:space-around;  
  padding:8px 10px calc(8px + env(safe-area-inset-bottom));  
  background:rgba(248,242,233,0.96);  
  border-top:1px solid #e1d7c7;  
  backdrop-filter:blur(16px);  
}  
/* fiecare tab */  
.nav-btn{  
  position:relative;  
  flex:1;  
  max-width:150px;  
  border:none;  
  background:transparent;  
  padding:0;  
  cursor:pointer;  
  color:#8b8476;  
  font-size:11px;  
}  
  
/* ‚Äûfilele‚Äù propriu-zise ‚Äì fundal rotunjit */  
.nav-btn::before{  
  content:"";  
  position:absolute;  
  inset:0;  
  top:-4px;  
  margin:0 4px;  
  border-radius:14px 14px 0 0;  
  background:rgba(255,252,246,0.65);  
  border:1px solid transparent;  
  border-bottom:none;  
  box-shadow:none;  
  transition:  
    transform 0.16s ease,  
    box-shadow 0.16s ease,  
    border-color 0.16s ease,  
    background 0.16s ease;  
  z-index:-1;  
}  
  
/* con»õinutul tabului (icon + text) */  
.nav-btn span.icon{  
  display:block;  
  font-size:17px;  
  margin-bottom:1px;  
}  
.nav-btn span:last-child{  
  position:relative;  
  z-index:1;  
}  
  
/* tab activ ‚Äì pare ridicat de pe ‚Äûcaiet‚Äù */  
.nav-btn.active{  
  color:var(--accent-strong);  
  font-weight:600;  
}  
.nav-btn.active::before{  
  background:#fdfbf7;  
  border-color:#ddcfb9;  
  box-shadow:0 -4px 10px rgba(90,72,52,0.18);  
  transform:translateY(-3px);  
}  
  
/* la hover pe desktop ‚Äì tab u»ôor ridicat */  
@media (hover:hover){  
  .nav-btn:hover::before{  
    box-shadow:0 -3px 8px rgba(90,72,52,0.16);  
  }  
}  
      
/* AdaugƒÉ √Æn <style> */  
.legend{  
  display:none;  
}  
    /* tot √Æn <style> */  
#naturalHint{  
  display:none;  
}  
    /* Chip-uri oprite (SUBJECT/TIME/PLACE etc. nefolosite √Æn propozi»õie) */  
#screen-builder .chip-off{  
  opacity: 0.45;  
  background: #eee2d1;  
  box-shadow: none;  
  filter: grayscale(0.1);  
}  
    /* ===== STEPPER pentru Builder (3 pa»ôi vizuali) ===== */  
  
.builder-steps{  
  display:flex;  
  gap:6px;  
  margin-bottom:8px;  
  padding:6px 6px 2px;  
  border-radius:14px;  
  background:rgba(255,252,246,0.9);  
  border:1px solid rgba(223,210,190,0.9);  
  box-shadow:0 6px 14px rgba(96,78,56,0.12);  
}  
  
.builder-step{  
  flex:1;  
  display:flex;  
  align-items:center;  
  gap:6px;  
  padding:4px 6px;  
  border-radius:999px;  
  font-size:11px;  
  color:var(--text-soft);  
  opacity:0.9;  
}  
  
.builder-step-number{  
  width:18px;  
  height:18px;  
  border-radius:50%;  
  display:inline-flex;  
  align-items:center;  
  justify-content:center;  
  font-size:11px;  
  font-weight:700;  
  background:#f3ebdd;  
  color:#70563a;  
}  
  
.builder-step-text{  
  white-space:nowrap;  
  overflow:hidden;  
  text-overflow:ellipsis;  
}  
  
/* primul pas ‚Äì accent u»ôor (pare ‚Äûactiv‚Äù) */  
.builder-step.active{  
  background:linear-gradient(120deg,#f6efe3,#f1e2cc);  
  color:var(--accent-strong);  
  font-weight:600;  
}  
  
.builder-step.active .builder-step-number{  
  background:var(--accent-strong);  
  color:#fff;  
}  
    #screen-exercises .exercise-question.empty {  
  color: var(--text-soft);  
  font-weight: 400;  
}  
    .example{  
  display:inline-block;  
  font-size:12px;  
  margin-top:2px;  
  color:var(--text-soft);  
}  
    /* Ascunde rezultatul coreean + rom√¢na corectatƒÉ din blocul Rom√¢nƒÉ ‚Üí CoreeanƒÉ */  
#roToKoResult,  
#roCorrected {  
  display: none;  
}  
    // === Bifa care activeazƒÉ / dezactiveazƒÉ Propozi»õia 2 ===  
const enableP2 = document.getElementById("enableP2");  
const titleP2  = document.getElementById("titleP2");  
const tableP2  = document.getElementById("tableP2");  
  
if (enableP2 && titleP2 && tableP2) {  
  const syncP2 = () => {  
    const on = enableP2.checked;  
    titleP2.classList.toggle("hidden", !on);  
    tableP2.classList.toggle("hidden", !on);  
  };  
  
  enableP2.addEventListener("change", syncP2);  
  // seteazƒÉ starea ini»õialƒÉ la √ÆncƒÉrcarea paginii  
  syncP2();  
}  
    /* Ascund bara veche "Mod afi»ôare / Propozi»õia 1‚Äì2" */  
#screen-builder > .mode-panel{  
  display:none;  
}  
  /* ===== Fine tuning pentru Builder ‚Äì Propozi»õia 2 ===== */  
  
/* r√¢ndul cu bifa P2, lipit de tabel, √Æn dreapta */  
.builder-enable-p2{  
  margin-top: 4px;  
  padding-top: 4px;  
  display: flex;  
  justify-content: flex-end;  
  border-top: 1px dashed var(--border);  
  font-size: 11px;  
  color: var(--text-soft);  
}  
  
.builder-enable-p2 label{  
  display: flex;  
  align-items: center;  
  gap: 4px;  
}  
  
/* titlul "Propozi»õia 2 (continuare / frazƒÉ)" ‚Äì aratƒÉ ca sub-titlu elegant */  
#titleP2{  
  margin-top: 6px;  
  padding-top: 4px;  
  border-top: 1px dashed var(--border);  
  display: flex;  
  justify-content: space-between;  
  align-items: center;  
  font-size: 11px;  
  color: var(--text-soft);  
}  
  
#titleP2 span::before{  
  content: "**‚Ü≥** ";  
  color: var(--accent-strong);  
  font-weight: 600;  
}    
   /* Ascund traducerea √Æn rom√¢nƒÉ DOAR √Æn preview-ul Builder */  
.preview-card #previewRoTitle,  
.preview-card #previewRo {  
  display: none;  
}   
   /* Ascund doar textul titlului "Traducere aproximativƒÉ (rom√¢nƒÉ ‚Äì pe pƒÉr»õi)" */  
.preview-card #previewRoTitle > span {  
  display: none;  
}   
  /* ===== TEMA PASTEL GLOBALƒÇ (v2.0) ‚Äì Raluca Korean ===== */  
  
/* fundal general aplica»õie */  
body.pastel-theme {  
  background: radial-gradient(circle at top left, #ffe4ff 0%, #d7f0ff 40%, #f0e5ff 75%, #f3d4ff 100%);  
  font-weight: 500;  
}  
  
/* header sus */  
body.pastel-theme .rk-header {  
  background: linear-gradient(120deg, #6fb8ff, #a774ff, #ff7fd1);  
  color: #fff;  
  box-shadow: 0 18px 45px rgba(77, 93, 255, 0.4);  
  border-radius: 26px;  
}  
  
body.pastel-theme .rk-header-main h1 {  
  font-weight: 900;  
  letter-spacing: 0.06em;  
  text-shadow: 0 3px 10px rgba(0, 0, 0, 0.25);  
}  
  
body.pastel-theme .rk-badge {  
  background: rgba(255, 255, 255, 0.18);  
  border-radius: 999px;  
  padding-inline: 14px;  
  font-weight: 600;  
}  
  
/* card-urile mari (builder, exerci»õii, lec»õii, glosar) */  
body.pastel-theme .card,  
body.pastel-theme .table-block,  
body.pastel-theme .preview-card {  
  background: radial-gradient(circle at top left, #ffffff 5%, #f7f0ff 45%, #ffe9ff 85%);  
  border-radius: 26px;  
  box-shadow:  
    0 18px 40px rgba(70, 85, 155, 0.22),  
    0 0 0 1px rgba(255, 255, 255, 0.9) inset;  
  border: none;  
}  
  
/* zona Rom√¢nƒÉ ‚Üí CoreeanƒÉ */  
body.pastel-theme #roInput,  
body.pastel-theme textarea {  
  border-radius: 18px;  
  border: none;  
  box-shadow:  
    0 10px 25px rgba(120, 140, 200, 0.18),  
    0 0 0 1px rgba(255, 255, 255, 0.9) inset;  
  background: linear-gradient(145deg, #ffffff, #f7f4ff);  
}  
  
/* titluri mai groase peste tot */  
body.pastel-theme h1,  
body.pastel-theme h2,  
body.pastel-theme h3 {  
  font-weight: 800;  
}  
  
/* butoane ‚Äû3D pill‚Äù generale */  
body.pastel-theme button,  
body.pastel-theme .bottom-nav .nav-btn {  
  border-radius: 999px;  
  border: none;  
  font-weight: 600;  
  padding-inline: 18px;  
  padding-block: 8px;  
  box-shadow:  
    0 10px 25px rgba(80, 90, 160, 0.35),  
    0 0 0 1px rgba(255, 255, 255, 0.7) inset;  
  background: linear-gradient(135deg, #4b8bff, #a55dff);  
  color: #ffffff;  
  transition: transform 0.1s ease-out, box-shadow 0.1s ease-out, filter 0.1s ease-out;  
}  
  
/* butoane secundare (gri/galben/roz) ‚Äì folosim clasa existentƒÉ .secondary */  
body.pastel-theme button.secondary {  
  background: linear-gradient(135deg, #ffaf6b, #ff72b4);  
}  
  
/* hover/active 3D */  
body.pastel-theme button:hover,  
body.pastel-theme .bottom-nav .nav-btn:hover {  
  transform: translateY(-1px);  
  filter: brightness(1.05);  
  box-shadow:  
    0 14px 32px rgba(60, 80, 160, 0.42),  
    0 0 0 1px rgba(255, 255, 255, 0.9) inset;  
}  
  
body.pastel-theme button:active,  
body.pastel-theme .bottom-nav .nav-btn:active {  
  transform: translateY(1px);  
  box-shadow:  
    0 6px 16px rgba(50, 70, 130, 0.5),  
    0 0 0 1px rgba(255, 255, 255, 0.7) inset;  
}  
  
/* bara de jos ‚Äì nav */  
body.pastel-theme .bottom-nav {  
  background: linear-gradient(120deg, #f3e6ff, #ffe8fb);  
  box-shadow: 0 -10px 25px rgba(110, 120, 190, 0.25);  
  border-radius: 24px 24px 0 0;  
}  
  
body.pastel-theme .bottom-nav .nav-btn {  
  background: transparent;  
  box-shadow: none;  
  color: #5860b0;  
}  
  
/* buton activ din nav */  
body.pastel-theme .bottom-nav .nav-btn.active {  
  background: linear-gradient(135deg, #5f8cff, #be6dff);  
  color: #fff;  
  box-shadow:  
    0 8px 20px rgba(90, 90, 190, 0.45),  
    0 0 0 1px rgba(255, 255, 255, 0.9) inset;  
}  
  
/* mici iconi»õe rotunde (dacƒÉ folose»ôti .icon / emoji √Æn span) */  
body.pastel-theme .icon {  
  display: inline-flex;  
  align-items: center;  
  justify-content: center;  
  width: 22px;  
  height: 22px;  
  border-radius: 999px;  
  background: radial-gradient(circle at 30% 0%, #fff, rgba(255, 255, 255, 0));  
  box-shadow: 0 6px 15px rgba(70, 70, 140, 0.35);  
}    
    /* ===== Carduri 3D pastel pentru Builder (SUBJECT / TIME / PLACE / MOD / OBJECT / NUMERAL / COUNTER / VERB...) ===== */  
  
body.pastel-theme #tableP1 > div {  
  position: relative;  
  border-radius: 22px;  
  padding: 10px 12px;  
  margin-bottom: 6px;  
  background: radial-gradient(circle at top left, #ffffff 0%, #f3f3ff 55%, #ffe7ff 100%);  
  box-shadow:  
    0 12px 28px rgba(80, 90, 160, 0.35),  
    0 0 0 1px rgba(255, 255, 255, 0.9) inset;  
  overflow: hidden;  
}  
  
/* efect de highlight pe marginea de sus a fiecƒÉrui card */  
body.pastel-theme #tableP1 > div::before {  
  content: "";  
  position: absolute;  
  inset: 0;  
  background: linear-gradient(120deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));  
  opacity: 0.8;  
  pointer-events: none;  
}  
  
/* textul din headerul cardului (SUBJECT, TIME, etc.) ‚Äì √Æl √Ængro»ôƒÉm */  
body.pastel-theme #tableP1 > div > *:first-child {  
  font-weight: 800;  
  letter-spacing: 0.02em;  
}  
  
/* micƒÉ margine √Æntre header »ôi restul con»õinutului din card */  
body.pastel-theme #tableP1 > div > *:nth-child(2) {  
  margin-top: 4px;  
}  
  
/* nuan»õe diferite pe fiecare card, ca √Æn mockup (pe bazƒÉ de pozi»õie) */  
body.pastel-theme #tableP1 > div:nth-child(1) {  
  background: radial-gradient(circle at top left, #e0f0ff 0%, #b9d5ff 45%, #e3e6ff 100%);  
}  
  
body.pastel-theme #tableP1 > div:nth-child(2) {  
  background: radial-gradient(circle at top left, #ffe1ea 0%, #ffc0d7 45%, #ffeaf5 100%);  
}  
  
body.pastel-theme #tableP1 > div:nth-child(3) {  
  background: radial-gradient(circle at top left, #fff3d6 0%, #ffd68a 45%, #fff0d7 100%);  
}  
  
body.pastel-theme #tableP1 > div:nth-child(4) {  
  background: radial-gradient(circle at top left, #d9ffe6 0%, #b4f4cf 45%, #e3fff0 100%);  
}  
  
body.pastel-theme #tableP1 > div:nth-child(5) {  
  background: radial-gradient(circle at top left, #dde6ff 0%, #b5c5ff 45%, #e3e5ff 100%);  
}  
  
body.pastel-theme #tableP1 > div:nth-child(6),  
body.pastel-theme #tableP1 > div:nth-child(7),  
body.pastel-theme #tableP1 > div:nth-child(8) {  
  background: radial-gradient(circle at top left, #f4e1ff 0%, #e3c1ff 45%, #f8e7ff 100%);  
}  
    /* Culori pastel Propozitia 2 (randul de jos) */  
body.pastel-theme #tableP2 > div:nth-child(1) {  
  background: radial-gradient(circle at top left, #ffe8ef 0%, #ffc7d9 45%, #ffeef5 100%);  
}  
  
body.pastel-theme #tableP2 > div:nth-child(2) {  
  background: radial-gradient(circle at top left, #fff1da 0%, #ffe0a8 45%, #fff3dd 100%);  
}  
  
body.pastel-theme #tableP2 > div:nth-child(3) {  
  background: radial-gradient(circle at top left, #e9ffe4 0%, #bfffd3 45%, #efffea 100%);  
}  
  
body.pastel-theme #tableP2 > div:nth-child(4) {  
  background: radial-gradient(circle at top left, #e8f2ff 0%, #c8dcff 45%, #eef4ff 100%);  
}  
  
body.pastel-theme #tableP2 > div:nth-child(5) {  
  background: radial-gradient(circle at top left, #f3e7ff 0%, #dcc4ff 45%, #f6ecff 100%);  
}  
  
body.pastel-theme #tableP2 > div:nth-child(6) {  
  background: radial-gradient(circle at top left, #fff0f0 0%, #ffd6d6 45%, #fff4f4 100%);  
}  
  
body.pastel-theme #tableP2 > div:nth-child(7) {  
  background: radial-gradient(circle at top left, #f0fff6 0%, #ccffe6 45%, #f2fff8 100%);  
}  
  
body.pastel-theme #tableP2 > div:nth-child(8) {  
  background: radial-gradient(circle at top left, #f0f5ff 0%, #d6e3ff 45%, #f3f7ff 100%);  
}  
    /* ===== Butoane pastel 3D ===== */  
  
body.pastel-theme .preview-buttons button,  
body.pastel-theme #prevBtn,  
body.pastel-theme #nextBtn,  
body.pastel-theme #resetBtn,  
body.pastel-theme #toggleRoBtn {  
  border: none;  
  border-radius: 18px;  
  padding: 8px 14px;  
  font-weight: 700;  
  letter-spacing: 0.02em;  
  color: #ffffff;  
  box-shadow:  
    0 10px 22px rgba(80, 80, 140, 0.28),  
    0 0 0 1px rgba(255,255,255,.7) inset;  
  transition: transform .15s ease, box-shadow .15s ease;  
}  
  
/* efect apƒÉsare */  
body.pastel-theme .preview-buttons button:active,  
body.pastel-theme #prevBtn:active,  
body.pastel-theme #nextBtn:active,  
body.pastel-theme #resetBtn:active,  
body.pastel-theme #toggleRoBtn:active {  
  transform: translateY(2px);  
  box-shadow:  
    0 4px 10px rgba(60, 60, 120, 0.25),  
    0 0 0 1px rgba(255,255,255,.6) inset;  
}  
    /* Random propozi»õie */  
body.pastel-theme #randomBtn {  
  background: linear-gradient(135deg, #7a6cff, #6cc9ff);  
}  
  
/* Audio coreeanƒÉ */  
body.pastel-theme #speakBtn {  
  background: linear-gradient(135deg, #6cc9ff, #5be6c6);  
}  
  
/* SalveazƒÉ propozi»õia */  
body.pastel-theme #favBtn {  
  background: linear-gradient(135deg, #ff9a6c, #ff5f8c);  
}  
  
/* Reset pƒÉr»õi propozi»õie */  
body.pastel-theme #resetBtn {  
  background: linear-gradient(135deg, #ff6b6b, #ff9a6c);  
}  
  
/* Prev / Next */  
body.pastel-theme #prevBtn {  
  background: linear-gradient(135deg, #8aa4ff, #b1c2ff);  
}  
body.pastel-theme #nextBtn {  
  background: linear-gradient(135deg, #9f77ff, #c188ff);  
}  
  
/* Ascunde traducerea */  
body.pastel-theme #toggleRoBtn {  
  background: linear-gradient(135deg, #ffa3a3, #ffc2a9);  
}  
    /* ===== Card Rom√¢nƒÉ ‚Üí CoreeanƒÉ ‚Äì glassmorphic ===== */  
  
body.pastel-theme #roInput,  
body.pastel-theme #roToKoResult,  
body.pastel-theme #roCorrected {  
  background: rgba(255,255,255,0.6);  
  backdrop-filter: blur(14px);  
  border-radius: 18px;  
  box-shadow:  
    0 12px 28px rgba(140, 130, 200, 0.25),  
    0 0 0 1px rgba(255,255,255,.6) inset;  
  font-weight: 600;  
}  
   /* Ascund DOAR textul titlului traducerii, pƒÉstrez butonul */  
body.pastel-theme .preview-card #previewRoTitle span {  
  display: none !important;  
}   
   /* ===== Card Rom√¢nƒÉ ‚Üí CoreeanƒÉ ‚Äì glassmorphism pastel ===== */  
  
#roCard {  
  margin-top: 16px;  
  padding: 16px 20px 20px;  
  border-radius: 22px;  
  background: linear-gradient(  
    135deg,  
    rgba(255, 255, 255, 0.75),  
    rgba(255, 255, 255, 0.45)  
  );  
  box-shadow:  
    0 18px 45px rgba(131, 112, 210, 0.35),  
    0 0 0 1px rgba(255, 255, 255, 0.7) inset;  
  backdrop-filter: blur(18px);  
}  
  
#roCard h2 {  
  font-size: 16px;  
  font-weight: 800;  
  letter-spacing: 0.03em;  
  margin-bottom: 10px;  
}  
  
/* textarea de rom√¢nƒÉ */  
#roCard textarea#roInput {  
  width: 100%;  
  border-radius: 18px;  
  border: none;  
  padding: 10px 14px;  
  font-size: 14px;  
  font-weight: 600;  
  background: rgba(255, 255, 255, 0.9);  
  box-shadow: 0 8px 20px rgba(135, 130, 200, 0.25);  
}  
  
/* butonul 'Tradu √Æn coreeanƒÉ' ‚Äì capsulƒÉ pastel 3D */  
#roCard #roTranslateBtn {  
  margin-top: 10px;  
  border-radius: 999px;  
  border: none;  
  padding: 8px 16px;  
  font-weight: 700;  
  color: #ffffff;  
  cursor: pointer;  
  background: linear-gradient(135deg, #6b8cff, #9b6bff);  
  box-shadow:  
    0 10px 24px rgba(108, 110, 210, 0.4),  
    0 0 0 1px rgba(255, 255, 255, 0.7) inset;  
  transition: transform 0.15s ease, box-shadow 0.15s ease;  
}  
  
#roCard #roTranslateBtn:active {  
  transform: translateY(2px);  
  box-shadow:  
    0 5px 12px rgba(108, 110, 210, 0.4),  
    0 0 0 1px rgba(255, 255, 255, 0.6) inset;  
}  
  
/* rezultatul √Æn coreeanƒÉ + varianta corectatƒÉ */  
#roCard #roToKoResult,  
#roCard #roCorrected {  
  margin-top: 10px;  
  padding: 8px 12px;  
  border-radius: 14px;  
  background: rgba(255, 255, 255, 0.9);  
  font-weight: 600;  
  box-shadow: 0 6px 16px rgba(140, 135, 210, 0.25);  
}   
  /* Ascund DOAR textul 'Traducere aproximativƒÉ (rom√¢nƒÉ ‚Äì pe pƒÉr»õi)' din Builder */  
.preview-card #previewRoTitle span {  
  display: none !important;  
}   
   /* ===== Card Rom√¢nƒÉ ‚Üí CoreeanƒÉ ‚Äì glassmorphism pastel ===== */  
#screen-builder .card {  
  margin-top: 16px;  
  padding: 16px 20px 20px;  
  border-radius: 22px;  
  background: linear-gradient(  
    135deg,  
    rgba(255, 255, 255, 0.8),  
    rgba(255, 255, 255, 0.5)  
  );  
  box-shadow:  
    0 18px 45px rgba(131, 112, 210, 0.35),  
    0 0 0 1px rgba(255, 255, 255, 0.7) inset;  
  backdrop-filter: blur(18px);  
}  
  
/* titlul Rom√¢nƒÉ ‚Üí CoreeanƒÉ */  
#screen-builder .card h2 {  
  font-size: 16px;  
  font-weight: 800;  
  letter-spacing: 0.03em;  
  margin-bottom: 10px;  
}  
/* TEXT MARE & BOLD ‚Äî bloc Rom√¢nƒÉ ‚Üí CoreeanƒÉ */  
.translation-output,  
#roToKrOutput,  
.translation-box {  
  font-size: 26px;  
  font-weight: 800;  
  line-height: 1.9;  
  letter-spacing: 0.3px;  
}  
    /* textarea √Æn care scrii rom√¢na */  
#screen-builder .card textarea#roInput {  
  width: 100%;  
  border-radius: 18px;  
  border: none;  
  padding: 10px 14px;  
  font-size: 14px;  
  font-weight: 600;  
  background: rgba(255, 255, 255, 0.95);  
  box-shadow: 0 8px 20px rgba(135, 130, 200, 0.25);  
}  
  
/* butonul 'Tradu √Æn coreeanƒÉ' ‚Äì capsulƒÉ 3D */  
#screen-builder .card #roTranslateBtn {  
  margin-top: 10px;  
  border-radius: 999px;  
  border: none;  
  padding: 8px 16px;  
  font-weight: 700;  
  color: #ffffff;  
  cursor: pointer;  
  background: linear-gradient(135deg, #6b8cff, #9b6bff);  
  box-shadow:  
    0 10px 24px rgba(108, 110, 210, 0.4),  
    0 0 0 1px rgba(255, 255, 255, 0.7) inset;  
  transition: transform 0.15s ease, box-shadow 0.15s ease;  
}  
  
#screen-builder .card #roTranslateBtn:active {  
  transform: translateY(2px);  
  box-shadow:  
    0 5px 12px rgba(108, 110, 210, 0.4),  
    0 0 0 1px rgba(255, 255, 255, 0.6) inset;  
}  
  
/* rezultatul √Æn coreeanƒÉ + varianta corectatƒÉ */  
#screen-builder .card #roToKoResult,  
#screen-builder .card #roCorrected {  
  margin-top: 10px;  
  padding: 8px 12px;  
  border-radius: 14px;  
  background: rgba(255, 255, 255, 0.95);  
  font-weight: 600;  
  box-shadow: 0 6px 16px rgba(140, 135, 210, 0.25);  
}   
    /* Carduri pƒÉr»õi propozi»õie ‚Äì stil capsule 3D */  
.table-block .table-title span,  
.mode-row span.section-label {  
  font-weight: 800;  
  letter-spacing: 0.02em;  
}  
  
/* Butoane select ‚Äì bordurƒÉ interioarƒÉ + glow fin */  
.part-option {  
  font-weight: 700;  
  box-shadow:  
    0 10px 22px rgba(120, 120, 200, 0.25),  
    0 0 0 1px rgba(255, 255, 255, 0.8) inset;  
  border-radius: 16px;  
  backdrop-filter: blur(6px);  
}  
    /* Butoane principale glossy gradient */  
.preview-buttons button,  
.btn-group button {  
  border-radius: 16px;  
  font-weight: 800;  
  letter-spacing: 0.02em;  
  border: none;  
  color: white;  
  padding: 8px 14px;  
  
  background: linear-gradient(135deg,  
    rgba(140, 170, 255, 1),  
    rgba(200, 130, 255, 1)  
  );  
  
  box-shadow:  
    0 14px 28px rgba(140, 120, 230, 0.45),  
    0 0 0 1px rgba(255, 255, 255, 0.7) inset;  
  
  transition: transform .15s ease, box-shadow .15s ease;  
}  
  
.preview-buttons button:active,  
.btn-group button:active {  
  transform: translateY(2px);  
  box-shadow:  
    0 6px 16px rgba(140, 120, 230, 0.45),  
    0 0 0 1px rgba(255, 255, 255, 0.6) inset;  
}  
    /* Ascund doar textul titlului traducerii aproximative din Builder */  
.preview-card .preview-title {  
  visibility: hidden;  
}  
  
/* Dar pƒÉstrez butonul "Ascunde traducerea" vizibil */  
.preview-card .preview-title button {  
  visibility: visible;  
}  
    /* ==== 1. FONTURI MAI GROASE PENTRU TITLURI + BUTOANE ==== */  
  
/* Titlul mare + subtitlul de sus */  
h1 {  
  font-weight: 800;  
  letter-spacing: 0.04em;  
}  
  
#subtitle {  
  font-weight: 500;  
}  
  
/* Titlurile de sec»õiune (ex: Rom√¢nƒÉ ‚Üí CoreeanƒÉ, Exerci»õii TOPIK etc.) */  
h2,  
.table-title span,  
.preview-title span {  
  font-weight: 700;  
}  
  
/* Text pe butoane (inclusiv butoane de jos: Builder / Exerci»õii / Lec»õii / Glosar) */  
button,  
.nav-btn span {  
  font-weight: 600;  
  letter-spacing: 0.02em;  
}  
    /* ==== 2. BUTOANE 3D + ANIMA»öIE ==== */  
  
/* bazƒÉ pentru TOATE butoanele */  
button,  
.nav-btn {  
  transition:  
    transform 0.12s ease-out,  
    box-shadow 0.12s ease-out,  
    filter 0.12s ease-out;  
  transform-origin: center;  
}  
  
/* efect ‚Äûplutire‚Äù la hover (pe desktop / c√¢nd atingi u»ôor) */  
button:hover,  
.nav-btn:hover {  
  transform: translateY(-1px);  
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.18);  
  filter: brightness(1.03);  
}  
  
/* mic ‚ÄûapƒÉsat‚Äù la click */  
button:active,  
.nav-btn:active {  
  transform: translateY(1px) scale(0.98);  
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.24);  
  filter: brightness(0.98);  
}  
  
/* un pic de glow √Æn plus pentru butoanele importante (random / audio / salveazƒÉ etc.) */  
button.primary,  
button#randomBtn,  
button#speakBtn,  
button#favBtn {  
  box-shadow: 0 12px 28px rgba(255, 160, 220, 0.45);  
}  
  
/* tab-ul activ din bara de jos (Builder, Exerci»õii, Lec»õii, Glosar) mai ‚Äûridicat‚Äù */  
.bottom-nav .nav-btn.active {  
  transform: translateY(-2px);  
  box-shadow: 0 14px 32px rgba(73, 46, 180, 0.45);  
}/* ==== 3. CARDURI GLOSSY PENTRU EXERCI»öII / LEC»öII / GLOSAR ==== */  
  
#screen-exercises .card,  
#screen-lessons .card,  
#screen-glossary .card {  
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.92), rgba(255, 220, 255, 0.88));  
  border-radius: 26px;  
  border: 1px solid rgba(255, 255, 255, 0.7);  
  box-shadow:  
    0 18px 40px rgba(40, 0, 80, 0.25),  
    0 0 0 1px rgba(255, 255, 255, 0.5) inset;  
  padding: 24px;  
}  
  
/* titlul lec»õiilor / glosarului un pic mai ‚Äûstatement‚Äù */  
#screen-exercises h2,  
#screen-lessons h2,  
#screen-glossary h2 {  
  font-weight: 800;  
  letter-spacing: 0.03em;  
}  
  
/* un mic gradient »ôi pe header-ul de lec»õie, dacƒÉ existƒÉ .lesson-header */  
#screen-lessons .lesson-header {  
  padding: 14px 18px;  
  border-radius: 18px;  
  background: linear-gradient(120deg, rgba(153, 206, 255, 0.85), rgba(255, 188, 224, 0.9));  
  box-shadow: 0 10px 24px rgba(90, 70, 180, 0.35);  
}  
  
/* glosarul ‚Äì lista principalƒÉ sƒÉ parƒÉ card, nu tabel simplu */  
#screen-glossary #glossaryList {  
  margin-top: 12px;  
  padding: 14px 16px;  
  border-radius: 20px;  
  background: linear-gradient(160deg, rgba(255, 255, 255, 0.96), rgba(220, 240, 255, 0.92));  
  box-shadow: 0 14px 28px rgba(60, 80, 140, 0.25);  
}    
   /* Ascund DOAR textul ‚ÄûTraducere aproximativƒÉ (rom√¢nƒÉ ‚Äì pe pƒÉr»õi)‚Äù din Builder */  
#screen-builder .preview-card #previewRoTitle {  
  display: none !important;  
}   
    #screen-builder .preview-card #previewRoTitle2 {  
  display: none !important;  
}  
    :root{  
  --glass-bg: linear-gradient(145deg,#ffffff80,#ffffff20);  
  --glass-border: 1px solid rgba(255,255,255,0.45);  
  --glass-shadow: 0 20px 40px rgba(0,0,0,0.08);  
  
  --grad-top: linear-gradient(120deg,#9fd6ff,#c6a7ff,#ff9acb);  
  --grad-bottom: linear-gradient(120deg,#b7e2ff,#e6c8ff,#ffd1e3);  
}  
    .card,  
.preview-card,  
.gloss-card,  
.lesson-card,  
.exercise-card {  
  background: var(--glass-bg);  
  border: var(--glass-border);  
  border-radius: 22px;  
  box-shadow: var(--glass-shadow);  
  backdrop-filter: blur(14px);  
}.rk-header{  
  background: var(--grad-top);  
  color:#0b1b3c;  
  font-weight:700;  
  letter-spacing:.5px;  
}  
    body{  
  background: var(--grad-bottom);  
}  
    button,  
.btn {  
  border-radius: 14px;  
  border: none;  
  padding: 10px 16px;  
  font-weight: 700;  
  backdrop-filter: blur(6px);  
  box-shadow: 0 8px 18px rgba(0,0,0,.12);  
  transform: translateY(0);  
  transition: .18s ease;  
}  
  
button:hover {  
  transform: translateY(-2px);  
}  
  
.btn-blue  { background: linear-gradient(120deg,#82b5ff,#5fa8ff); color:#fff; }  
.btn-green { background: linear-gradient(120deg,#8df2c8,#5ed6a8); color:#044; }  
.btn-pink  { background: linear-gradient(120deg,#ff9acb,#ff7fae); color:#fff; }  
.btn-orange{ background: linear-gradient(120deg,#ffb585,#ff8a46); color:#552200; }  
   #screen-builder .card,  
#screen-builder .preview-card {  
  border-radius: 24px;  
}  
    #screen-glossary .card {  
  border-radius: 24px;  
}  
  #screen-lessons .card {  
  border-radius: 24px;  
}  
  #screen-exercises .card {  
  border-radius: 24px;  
}  
   /* Iconi»õe + micro 3D pe butoanele principale din Builder */  
#screen-builder #randomBtn::before,  
#screen-builder #speakBtn::before,  
#screen-builder #favBtn::before {  
  display: inline-block;  
  margin-right: 6px;  
  transform: translateY(1px);  
  transition: transform 0.15s ease, filter 0.15s ease;  
}  
  
/* Icon concrete */  
#screen-builder #randomBtn::before  { content: "üé≤"; }  
#screen-builder #speakBtn::before   { content: "üîä"; }  
#screen-builder #favBtn::before     { content: "‚≠ê"; }  
  
/* Micro 3D c√¢nd treci cu mouse-ul / atingi */  
#screen-builder #randomBtn:hover::before,  
#screen-builder #speakBtn:hover::before,  
#screen-builder #favBtn:hover::before {  
  transform: translateY(-1px) scale(1.08);  
  filter: drop-shadow(0 2px 3px rgba(0,0,0,0.25));  
}  
   /* Card-uri care ‚Äûplutesc‚Äù u»ôor la hover */  
.card,  
.preview-card,  
#screen-exercises .card,  
#screen-lessons .card,  
#screen-glossary .card {  
  transition: transform 0.18s ease-out, box-shadow 0.18s ease-out;  
}  
  
.card:hover,  
.preview-card:hover,  
#screen-exercises .card:hover,  
#screen-lessons .card:hover,  
#screen-glossary .card:hover {  
  transform: translateY(-3px);  
  box-shadow: 0 22px 45px rgba(0,0,0,0.14);  
}  
 /* Neon focus pentru c√¢mpuri de text / select */  
input:focus,  
textarea:focus,  
select:focus {  
  outline: none;  
  border-color: rgba(255,255,255,0.9);  
  box-shadow:  
    0 0 0 1px rgba(255,255,255,0.9),  
    0 0 0 3px rgba(149, 120, 255, 0.7),  
    0 0 16px rgba(149, 120, 255, 0.7);  
  background-color: rgba(255,255,255,0.8);  
}.bottom-nav {  
  backdrop-filter: blur(18px);  
}  
  
/* pastilƒÉ iOS pentru nav */  
.bottom-nav .nav-btn {  
  border-radius: 999px;  
  padding: 8px 18px 6px;  
  font-weight: 600;  
  background: linear-gradient(120deg,#f4e4ff,#fdf3ff);  
  color: #4a3b73;  
  box-shadow: 0 8px 20px rgba(0,0,0,0.10);  
  transform: translateY(0);  
  transition: transform 0.16s ease, box-shadow 0.16s ease, background 0.16s ease;  
}  
  
/* buton selectat */  
.bottom-nav .nav-btn.active {  
  background: linear-gradient(120deg,#8fd3ff,#c798ff);  
  color: white;  
  box-shadow: 0 14px 32px rgba(123, 104, 238, 0.5);  
  transform: translateY(-2px);  
}  
   /* Header ‚Äì gradient care se mi»ôcƒÉ + glow subtil */  
.rk-header {  
  position: relative;  
  z-index: 2;  
  background-size: 220% 220%;          /* permite animarea gradientului existent */  
  animation: headerGradient 18s ease-in-out infinite;  
}  
  
/* Aura coloratƒÉ moale √Æn jurul header-ului */  
.rk-header::after {  
  content: "";  
  position: absolute;  
  inset: -18px -26px;                  /* c√¢t de mare e ‚Äúaura‚Äù √Æn jur */  
  border-radius: 32px;  
  background: radial-gradient(circle at 0% 0%,  rgba(143,211,255,0.9), transparent 60%),  
              radial-gradient(circle at 100% 0%, rgba(255,174,238,0.9), transparent 60%),  
              radial-gradient(circle at 50% 100%, rgba(173,255,189,0.9), transparent 65%);  
  filter: blur(32px);  
  opacity: 0.24;  
  pointer-events: none;  
  z-index: -1;  
  animation: headerGlow 8s ease-in-out infinite;  
}  
  
/* anima mi»ôcarea gradientului din header (folose»ôte gradientul pe care √Æl ai deja) */  
@keyframes headerGradient {  
  0%   { background-position: 0% 40%; }  
  50%  { background-position: 100% 60%; }  
  100% { background-position: 0% 40%; }  
}  
  
/* anima ‚Äúrespira»õia‚Äù aurei */  
@keyframes headerGlow {  
  0%, 100% {  
    opacity: 0.18;  
    transform: translateY(0);  
  }  
  50% {  
    opacity: 0.32;  
    transform: translateY(3px);  
  }  
}  
    /* Containerul principal ‚Äì √Æl facem ‚Äúsuport‚Äù pentru fundalul animat */  
.app {  
  position: relative;  
  z-index: 0;  
  overflow-x: hidden;  
}  
  
/* Stratul de fundal animat, foarte subtil (sub toatƒÉ aplica»õia) */  
.app::before {  
  content: "";  
  position: fixed;      /* rƒÉm√¢ne pe loc c√¢nd derulezi */  
  inset: 0;  
  z-index: -1;  
  pointer-events: none;  
  
  background:  
    radial-gradient(circle at 0% 0%,     rgba(143,211,255,0.7), transparent 55%),  
    radial-gradient(circle at 100% 0%,   rgba(255,174,238,0.75), transparent 55%),  
    radial-gradient(circle at 0% 100%,   rgba(173,255,189,0.7), transparent 55%),  
    radial-gradient(circle at 100% 100%, rgba(255,214,165,0.75), transparent 60%);  
  background-size: 160% 160%;  
  animation: appBgDrift 32s ease-in-out infinite alternate;  
}  
  
/* mi»ôcare foarte lentƒÉ, ‚Äúrespira»õie‚Äù de culori */  
@keyframes appBgDrift {  
  0% {  
    background-position:  
      0%   0%,  
      100% 0%,  
      0%   100%,  
      100% 100%;  
  }  
  50% {  
    background-position:  
      12%  8%,  
      88%  2%,  
      6%   88%,  
      94%  96%;  
  }  
  100% {  
    background-position:  
      0%   10%,  
      100% 6%,  
      4%   100%,  
      96%  90%;  
  }  
}  /* Glow animat foarte subtil pe header */  
.rk-header {  
  position: relative;  
  overflow: visible;  
}  
  
.rk-header::after {  
  content: "";  
  position: absolute;  
  left: 50%;  
  top: 100%;  
  width: 260px;  
  height: 70px;  
  transform: translateX(-50%);  
  border-radius: 50%;  
  background: radial-gradient(  
    circle,  
    rgba(255, 170, 255, 0.35),  
    rgba(120, 160, 255, 0.18),  
    rgba(255, 255, 255, 0)  
  );  
  filter: blur(22px);  
  animation: rkGlow 6s ease-in-out infinite alternate;  
  pointer-events: none;  
  z-index: -1;  
}  
  
@keyframes rkGlow {  
  0%   { opacity: 0.45; transform: translateX(-50%) translateY(6px) scale(1.0);}  
  100% { opacity: 0.85; transform: translateX(-50%) translateY(2px) scale(1.08);}  
}  
  /* **‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê** */  
/* üåà Gradient animat lent pe fundal */  
/* **‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê** */  
  
body.pastel-theme {  
  background: linear-gradient(  
    120deg,  
    #dff3ff,  
    #ffe9ff,  
    #f4fffc,  
    #e8f0ff  
  );  
  background-size: 380% 380%;  
  animation: bgFlow 28s ease-in-out infinite;  
}  
  
@keyframes bgFlow {  
  0%   { background-position: 0% 50%; }  
  50%  { background-position: 100% 50%; }  
  100% { background-position: 0% 50%; }  
}  
  
  
  
/* **‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê** */  
/* ‚ú® Glow animat foarte subtil sub header */  
/* **‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê** */  
  
.rk-header {  
  position: relative;  
  overflow: visible;  
}  
  
.rk-header::after {  
  content: "";  
  position: absolute;  
  left: 50%;  
  top: 100%;  
  width: 260px;  
  height: 70px;  
  transform: translateX(-50%);  
  border-radius: 50%;  
  background: radial-gradient(  
    circle,  
    rgba(255, 170, 255, 0.35),  
    rgba(120, 160, 255, 0.18),  
    rgba(255, 255, 255, 0)  
  );  
  filter: blur(22px);  
  animation: rkGlow 6s ease-in-out infinite alternate;  
  pointer-events: none;  
  z-index: -1;  
}  
  
@keyframes rkGlow {  
  0% {  
    opacity: 0.45;  
    transform: translateX(-50%) translateY(6px) scale(1.0);  
  }  
  100% {  
    opacity: 0.85;  
    transform: translateX(-50%) translateY(2px) scale(1.08);  
  }  
}  
 /* TEXT MARE & BOLD ‚Äî preview propozi»õie coreeanƒÉ */  
.preview-sentence,  
#koreanPreview,  
.preview-output {  
  font-size: 26px;  
  font-weight: 800;  
  line-height: 1.9;  
  letter-spacing: 0.3px;  
}  
    body.pastel-theme .bottom-nav:last-of-type {  
  display: flex !important;  
}  
  
/* Scoate plƒÉcu»õa albƒÉ din spatele tab-urilor */  
.bottom-nav .nav-btn::before {  
  content: none !important;  
}  
  /* ============================================================  
   PARSER RO ‚Üí BUILDER (V2, mai complet)  
   ============================================================ */  
  
/* 1. Normalizare text rom√¢nƒÉ:  
   - litere mici  
   - diacritice uniformizate  
   - scoatem semnele de punctua»õie  
*/  
function normalizeRo(text) {  
  if (!text) return "";  
  let t = text.toLowerCase();  
  
  // uniformizƒÉm diacritice / variante  
  t = t.replace(/≈ü/g, "»ô").replace(/≈£/g, "»õ");  
  t = t.replace(/√É¬¢/g, "√¢").replace(/√É¬Æ/g, "√Æ");  
  
  // scoatem unele semne de punctua»õie  
  t = t.replace(/[.,!?;:]/g, " ");  
  
  // spa»õii multiple ‚Üí un singur spa»õiu  
  t = t.replace(/\s+/g, " ").trim();  
  return t;  
}  
  
/* 2. Reguli pentru fiecare slot  
   - fiecare regulƒÉ are un regex »ôi un value (cuv√¢ntul coreean)  
   - ORDINEA conteazƒÉ: primele reguli sunt mai ‚Äûprioritare‚Äù  
*/  
  
const RO_RULES = {  
  subject: [  
    // eu (formal) ‚Äì **Ï†Ä**  
    { re: /\beu\s*\(formal\)|eu\s*-\s*formal\b/, value: "**Ï†Ä**" },  
    // eu (informal) ‚Äì **ÎÇò**  
    { re: /\beu\s*\(informal\)|eu\s*-\s*informal\b/, value: "**ÎÇò**" },  
    // dacƒÉ apare simplu ‚Äûeu‚Äù ‚Üí default **Ï†Ä** (po»õi schimba)  
    { re: /\beu\b/, value: "**Ï†Ä**" },  
    // tu  
    { re: /\btu\b/, value: "**ÎÑà**" }  
  ],  
  
  time: [  
    { re: /\bazi\b|\bastƒÉzi\b/, value: "**Ïò§Îäò**" },  
    { re: /\bm√¢ine\b/, value: "**ÎÇ¥Ïùº**" },  
    { re: /\bieri\b/, value: "**Ïñ¥Ï†ú**" },  
    { re: /\bacum\b/, value: "**ÏßÄÍ∏à**" }  
  ],  
  
  place: [  
    { re: /\bacas[ƒÉa]\b/, value: "**Ïßë**" },  
    { re: /la\s+»ôcoal[ƒÉa]|la\s+scoala|»ôcoal[ƒÉa]\b|scoala\b/, value: "**ÌïôÍµê**" },  
    { re: /la\s+firm[ƒÉa]|la\s+serviciu|la\s+companie|firm[ƒÉa]\b|serviciu\b|companie\b/, value: "**ÌöåÏÇ¨**" },  
    { re: /la\s+banc[ƒÉa]|banc[ƒÉa]\b/, value: "**ÏùÄÌñâ**" },  
    { re: /cafenea|cafene[al]/, value: "**Ïπ¥Ìéò**" }  
  ],  
  
  mod: [  
    { re: /\bbine\b|frumos\b|ok\b/, value: "**Ïûò**" },  
    { re: /√Æn\s+lini»ôte|in\s+liniste|lini»ôte|liniste/, value: "**Ï°∞Ïö©Ìûà**" },  
    { re: /cu\s+s√¢rguint[ƒÉa]|cu\s+sarguinta|harnic|cu\s+mult\s+efort/, value: "**Ïó¥Ïã¨Ìûà**" },  
    { re: /√Æncet|incet/, value: "**Ï≤úÏ≤úÌûà**" },  
    { re: /repede|rapid/, value: "**Îπ®Î¶¨**" }  
  ],  
  
  object: [  
    { re: /cafea/, value: "**Ïª§Ìîº**" },  
    { re: /\bap[ƒÉa]\b|ap[ƒÉa]\s+mineral[ƒÉa]?/, value: "**Î¨º**" },  
    { re: /carte|c[ƒÉa]r»õile|c[ƒÉa]rti\b/, value: "**Ï±Ö**" },  
    { re: /m[ƒÉa]ncare|pr[ƒÉa]nzul|cina|mic\s+dejun/, value: "**ÏùåÏãù**" },  
    { re: /ceai\b/, value: "**Ï∞®**" }  
  ],  
  
  // op»õional: numƒÉr pentru obiect (doar 1‚Äì3, ca exemplu)  
  numeral: [  
    { re: /\bo\s+carte\b|\bunƒÉ\s+carte\b|\b(o|un)\s+caf(ea|ea)\b/, value: "**Ìïú**" },  
    { re: /\bdou[ƒÉa]\s+car»õi|dou[ƒÉa]\s+cafele/, value: "**Îëê**" },  
    { re: /\btrei\s+car»õi|trei\s+cafele/, value: "**ÏÑ∏**" }  
  ],  
  
  // op»õional: alegem classifier √Æn func»õie de obiect  
  counter: [  
    { re: /carte|c[ƒÉa]rti\b/, value: "**Í∂å**" },  // pentru cƒÉr»õi  
    { re: /cafea|ap[ƒÉa]\b|ceai\b|m[ƒÉa]ncare/, value: "**Í∞ú**" } // general  
  ],  
  
  // verb foarte simplu ‚Äì doar pentru propozi»õia mare  
  verb: [  
    { re: /merg\b|a merge|sƒÉ merg|sa merg/, value: "**Í∞ÄÏöî**" },  
    { re: /vin\b|a veni|sƒÉ vin|sa vin/, value: "**ÏôÄÏöî**" },  
    { re: /beau\b|a bea|sƒÉ beau|sa beau/, value: "**ÎßàÏÖîÏöî**" },  
    { re: /m[ƒÉa]n[√¢a]nc\b|m[ƒÉa]n√¢nc|mananc|a m[ƒÉa]nca/, value: "**Î®πÏñ¥Ïöî**" },  
    { re: /citesc|a citi|sƒÉ citesc|sa citesc/, value: "**ÏùΩÏñ¥Ïöî**" },  
    { re: /lucrez|a lucra/, value: "**ÏùºÌï¥Ïöî**" }  
  ]  
};  
  
/* 3. Helper: ia primul value al regulii care se potrive»ôte */  
function matchSlot(rules, text) {  
  if (!rules) return null;  
  for (const rule of rules) {  
    if (rule.re.test(text)) return rule.value;  
  }  
  return null;  
}  
  
/* 4. Func»õia principalƒÉ: text RO ‚Üí sloturi Builder */  
function parseRomanianToSlots(text) {  
  const t = normalizeRo(text);  
  
  const slots = {  
    subject: matchSlot(RO_RULES.subject, t),  
    time:    matchSlot(RO_RULES.time, t),  
    place:   matchSlot(RO_RULES.place, t),  
    mod:     matchSlot(RO_RULES.mod, t),  
    object:  matchSlot(RO_RULES.object, t),  
    numeral: matchSlot(RO_RULES.numeral, t),  
    counter: matchSlot(RO_RULES.counter, t),  
    verb:    matchSlot(RO_RULES.verb, t)  
  };  
  
  return slots;  
}  
  
/* 5. AplicƒÉ sloturile √Æn Propozi»õia 1 (tabelul de sus) */  
function applySlotsToBuilderP1(slots) {  
  const table = document.getElementById("tableP1");  
  if (!table || !slots) return;  
  
  const setCol = (key, value) => {  
    if (!value) return;  
    const col = table.querySelector('.col[data-key="' + key + '"] .col-body-main');  
    if (col) {  
      col.textContent = value;  
    }  
  };  
  
  setCol("subject", slots.subject);  
  setCol("time",    slots.time);  
  setCol("place",   slots.place);  
  setCol("mod",     slots.mod);  
  setCol("object",  slots.object);  
  setCol("numeral", slots.numeral);  
  setCol("counter", slots.counter);  
  // verbul √Æl folosim doar la reconstruc»õia propozi»õiei, nu umplem coloanƒÉ (deocamdatƒÉ)  
}  
  
/* 6. Reconstruie»ôte propozi»õia coreeanƒÉ mare din sloturi */  
function rebuildPreviewFromBuilderP1(slotsFromParser) {  
  const table = document.getElementById("tableP1");  
  if (!table) return;  
  
  const pick = (key) => {  
    const col = table.querySelector('.col[data-key="' + key + '"] .col-body-main');  
    return col ? col.textContent.trim() : "";  
  };  
  
  const subject = pick("subject") || "**Ï†Ä**";  
  const time    = pick("time");  
  const place   = pick("place");  
  const mod     = pick("mod");  
  const numeral = pick("numeral");  
  const counter = pick("counter");  
  const object  = pick("object");  
  
  // dacƒÉ avem numeral+counter+object ‚Üí ‚Äû**Ï±Ö** **Ìïú** **Í∂å**‚Äù etc.  
  let objectChunk = "";  
  if (object && numeral && counter) {  
    objectChunk = object + " " + numeral + " " + counter;  
  } else if (object) {  
    objectChunk = object;  
  }  
  
  // verb: dacƒÉ parserul a gƒÉsit ceva, √Æl folosim, altfel **Í∞ÄÏöî**  
  const verb =  
    (slotsFromParser && slotsFromParser.verb) ||  
    "**Í∞ÄÏöî**";  
  
  const pieces = [subject, time, place, mod, objectChunk, verb].filter(Boolean);  
  const sentence = pieces.join(" ");  
  
  const out =  
    document.getElementById("previewSentence") ||  
    document.getElementById("previewKo") ||  
    document.querySelector(".preview-sentence");  
  
  if (out) {  
    out.textContent = sentence;  
  }  
}    
   // === LimbƒÉ de intrare (Rom√¢nƒÉ / English) din switch-ul de sus ===  
function getInputLang() {  
  const el = document.querySelector('input[name="inputLang"]:checked');  
  // fallback: dacƒÉ nu gƒÉsim nimic, presupunem Rom√¢nƒÉ  
  return el ? el.value : "ro";  
}   

  </style>
</head>
<body class="pastel-theme">
  <div class="app">
<header class="rk-header">  
  <div class="rk-header-main">  
    <h1>Raluca Korean</h1>  
    <span class="rk-badge">Study App v2.0</span>  
  </div>  
  <p id="subtitle">Exerci»õii TOPIK ‚Äî Quiz + Particule + Puzzle</p>  
</header>

<div class="screen active" id="screen-exercises">  
      <div class="card ex-card">  
        <div class="ex-header-row">  
          <div>  
            <div class="ex-pill">TOPIK trainer</div>  
            <h2>Exerci»õii TOPIK ‚Äì propozi»õii</h2>  
          </div>  
          <div class="ex-mini-hint">  
            AntreneazƒÉ: verbe ¬∑ particule ¬∑ conjugƒÉri  
          </div>  
        </div>  
  
        <div class="ex-type-row">  
          <div class="ex-type-left">  
            <span class="small-label">Tip exerci»õiu</span>  
            <span class="ex-type-chip" id="exerciseTypeLabel">  
              propozi»õii random din builder  
            </span>  
          </div>  
          <select id="exerciseType">  
            <option value="verb">Alege VERBUL corect</option>  
            <option value="particle">Alege PARTICULA corectƒÉ (simplu)</option>  
            <option value="particlePlus">Particule multiple (**ÏùÄ**/**Îäî**, **Ïù¥**/**Í∞Ä**, **ÏùÑ**/**Î•º**, **Ïóê**/**ÏóêÏÑú**)</option>  
            <option value="conjug">Alege CONJUGAREA corectƒÉ</option>  
            <option value="puzzle">üß© Puzzle ‚Äì ordoneazƒÉ propozi»õia</option>  
          </select>  
        </div>  
  
        <div class="ex-question-shell">  
          <div class="ex-question-tag-row">  
            <span class="ex-question-tag">√éntrebare curentƒÉ</span>  
            <span class="ex-question-subtag" id="exerciseSubtag"> </span>  
          </div>  
  
          <div class="exercise-question empty" id="exerciseQuestion">  
            Alege tipul de exerci»õiu »ôi apasƒÉ ‚Äû√éntrebare nouƒÉ‚Äù.  
          </div>  
  
          <div class="exercise-options" id="exerciseOptions"></div>  
  
          <div class="btn-group ex-buttons">  
            <button id="checkAnswerBtn">VerificƒÉ rƒÉspunsul</button>  
            <button class="secondary" id="nextQuestionBtn">√éntrebare nouƒÉ</button>  
          </div>  
  
          <div class="exercise-feedback" id="exerciseFeedback"></div>  
        </div>  
      </div>  
  
      <div class="legend ex-legend">  
        ‚û§ Po»õi schimba tipul de exerci»õiu din box-ul de sus.<br />  
        ‚û§ La ‚ÄûParticule multiple‚Äù, toate spa»õiile (1)(2)(3)(4) trebuie corecte ca sƒÉ fie ‚úÖ.  
      </div>  
    </div>  
  
    <!-- SCREEN 3: LEC»öII DE GRAMATICƒÇ -->  
    

<nav class="bottom-nav">  
    <button class="nav-btn active" data-target="builder">  
      <span class="icon">üèó</span>  
      <span>Builder</span>  
    </button>  
    <button class="nav-btn" data-target="exercises">  
      <span class="icon">üìù</span>  
      <span>Exerci»õii</span>  
    </button>  
    <button class="nav-btn" data-target="lessons">  
      <span class="icon">üìó</span>  
      <span>Lec»õii</span>  
    </button>  
    <button class="nav-btn" data-target="glossary">  
      <span class="icon">üìö</span>  
      <span>Glosar</span>  
    </button>  
  </nav>
  </div>

  <script src="topik4_quiz_particles_500.js"></script>

  <script>
  (function(){
    const map = { builder:'builder.html', exercises:'exercises.html', lessons:'lessons.html', glossary:'glossary.html' };
    document.querySelectorAll('.nav-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const t = btn.dataset.target;
        if(map[t]) window.location.href = map[t];
      });
    });
  })();

  const EX_LS_KEY = "rk_exercises_state_v3_topik4";
  const QUIZ_BANK = Array.isArray(window.TOPIK4_QUIZ_500) ? window.TOPIK4_QUIZ_500 : [];
  const PARTICLES_BANK = Array.isArray(window.TOPIK4_PARTICLES_500) ? window.TOPIK4_PARTICLES_500 : [];
  const PUZZLE_BANK = QUIZ_BANK.slice(0, 500).map(q => {
    const clean = String(q.ko||"").trim().replace(/[.?!]/g,"");
    const words = clean.split(/\s+/).filter(Boolean);
    return { words, answer: clean, ro: q.ro || "" };
  }).filter(p => p.words.length >= 2);

  const exerciseTypeEl = document.getElementById("exerciseType");
  const exerciseTypeLabelEl = document.getElementById("exerciseTypeLabel");
  const exerciseSubtagEl = document.getElementById("exerciseSubtag");
  const exerciseQuestionEl = document.getElementById("exerciseQuestion");
  const exerciseOptionsEl = document.getElementById("exerciseOptions");
  const exerciseFeedbackEl = document.getElementById("exerciseFeedback");
  const checkAnswerBtn = document.getElementById("checkAnswerBtn");
  const nextQuestionBtn = document.getElementById("nextQuestionBtn");

  function safeParse(json, fallback){ try { return JSON.parse(json); } catch { return fallback; } }
  function loadState(){
    const base = { quiz:{idx:0,correct:0,total:0}, particles:{idx:0,correct:0,total:0}, puzzle:{idx:0,correct:0,total:0}, lastType:"verb" };
    const raw = localStorage.getItem(EX_LS_KEY);
    if(!raw) return base;
    const st = safeParse(raw, base);
    return Object.assign(base, st);
  }
  const state = loadState();
  function saveState(){ localStorage.setItem(EX_LS_KEY, JSON.stringify(state)); }

  function escapeHtml(s){
    return String(s ?? "").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");
  }
  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]]=[a[j],a[i]];
    }
    return a;
  }
  function setEmptyQuestion(msg){
    exerciseQuestionEl.classList.add("empty");
    exerciseQuestionEl.textContent = msg;
    exerciseOptionsEl.innerHTML = "";
    exerciseFeedbackEl.textContent = "";
  }

  let current = null;

  function setTypeLabel(type){
    const map = {
      verb: "Alege traducerea corectƒÉ (KO ‚Üí RO)",
      particle: "Alege particula corectƒÉ",
      puzzle: "Puzzle ‚Äî ordoneazƒÉ propozi»õia"
    };
    exerciseTypeLabelEl.textContent = map[type] || "‚Äî";
  }

  function renderQuestion(type){
    setTypeLabel(type);
    exerciseFeedbackEl.textContent = "";
    exerciseOptionsEl.innerHTML = "";
    exerciseQuestionEl.classList.remove("empty");

    if(type==="verb"){
      if(!QUIZ_BANK.length) return setEmptyQuestion("Nu existƒÉ √ÆntrebƒÉri √Æn banca QUIZ.");
      if(state.quiz.idx >= QUIZ_BANK.length) state.quiz.idx = 0;
      const q = QUIZ_BANK[state.quiz.idx];
      const correct = q.ro;

      const wrong = shuffle(QUIZ_BANK.filter(x=>x.ro!==correct)).slice(0,3).map(x=>x.ro);
      const opts = shuffle([correct, ...wrong]);

      exerciseSubtagEl.textContent = `√éntrebarea ${state.quiz.idx+1} / ${QUIZ_BANK.length} ¬∑ Scor ${state.quiz.correct}/${state.quiz.total}`;
      exerciseQuestionEl.innerHTML = `<b>${escapeHtml(q.ko)}</b>`;

      opts.forEach(opt=>{
        const btn = document.createElement("button");
        btn.type="button";
        btn.className="ex-option";
        btn.textContent = opt;
        btn.addEventListener("click", ()=>{
          document.querySelectorAll("#exerciseOptions .ex-option").forEach(b=>b.disabled=true);

          const ok = opt === correct;
          state.quiz.total += 1;
          if(ok) state.quiz.correct += 1;

          btn.classList.add(ok ? "good" : "bad");
          exerciseFeedbackEl.textContent = ok ? "‚úÖ Corect." : `‚ùå Gre»ôit. Corect: ${correct}`;

          saveState();
          exerciseSubtagEl.textContent = `√éntrebarea ${state.quiz.idx+1} / ${QUIZ_BANK.length} ¬∑ Scor ${state.quiz.correct}/${state.quiz.total}`;
        });
        exerciseOptionsEl.appendChild(btn);
      });

      current = { type:"verb" };
      return;
    }

    if(type==="particle"){
      if(!PARTICLES_BANK.length) return setEmptyQuestion("Nu existƒÉ √ÆntrebƒÉri √Æn banca PARTICULE.");
      if(state.particles.idx >= PARTICLES_BANK.length) state.particles.idx = 0;
      const q = PARTICLES_BANK[state.particles.idx];

      exerciseSubtagEl.textContent = `√éntrebarea ${state.particles.idx+1} / ${PARTICLES_BANK.length} ¬∑ Corecte ${state.particles.correct}`;
      exerciseQuestionEl.innerHTML = `<b>${escapeHtml(q.text)}</b>`;

      q.choices.forEach(ch=>{
        const btn = document.createElement("button");
        btn.type="button";
        btn.className="ex-option";
        btn.textContent = ch;
        btn.addEventListener("click", ()=>{
          document.querySelectorAll("#exerciseOptions .ex-option").forEach(b=>b.disabled=true);

          const ok = ch === q.answer;
          state.particles.total += 1;
          if(ok) state.particles.correct += 1;

          btn.classList.add(ok ? "good" : "bad");
          exerciseFeedbackEl.textContent = ok ? `‚úÖ Corect. (${q.explain})` : `‚ùå Gre»ôit. Corect: ${q.answer} ‚Äî ${q.explain}`;

          saveState();
          exerciseSubtagEl.textContent = `√éntrebarea ${state.particles.idx+1} / ${PARTICLES_BANK.length} ¬∑ Corecte ${state.particles.correct}`;
        });
        exerciseOptionsEl.appendChild(btn);
      });

      current = { type:"particle" };
      return;
    }

    if(type==="puzzle"){
      if(!PUZZLE_BANK.length) return setEmptyQuestion("Nu existƒÉ puzzle-uri √Æn bancƒÉ.");
      if(state.puzzle.idx >= PUZZLE_BANK.length) state.puzzle.idx = 0;
      const pz = PUZZLE_BANK[state.puzzle.idx];

      exerciseSubtagEl.textContent = `Puzzle ${state.puzzle.idx+1} / ${PUZZLE_BANK.length} ¬∑ Corecte ${state.puzzle.correct}`;
      exerciseQuestionEl.innerHTML = `<b>AranjeazƒÉ cuvintele:</b>`;

      exerciseOptionsEl.innerHTML = `
        <div class="ex-puzzle">
          <div class="ex-pz-row">
            <div class="ex-pz-title">Cuvinte</div>
            <div id="pzBank" class="ex-pz-bank"></div>
          </div>
          <div class="ex-pz-row" style="margin-top:10px;">
            <div class="ex-pz-title">Propozi»õia ta</div>
            <div id="pzLine" class="ex-pz-line"></div>
          </div>
          <div class="ex-pz-actions" style="margin-top:10px;">
            <button type="button" class="secondary" id="pzClear">CurƒÉ»õƒÉ</button>
          </div>
        </div>
      `;

      const bankEl = document.getElementById("pzBank");
      const lineEl = document.getElementById("pzLine");
      const clearBtn = document.getElementById("pzClear");
      let built = [];

      function renderPuzzle(){
        bankEl.innerHTML = "";
        lineEl.innerHTML = "";

        const remaining = pz.words.filter(w => !built.includes(w));
        shuffle(remaining).forEach(w=>{
          const chip = document.createElement("button");
          chip.type="button";
          chip.className="ex-chip";
          chip.textContent = w;
          chip.addEventListener("click", ()=>{
            built.push(w);
            renderPuzzle();
          });
          bankEl.appendChild(chip);
        });

        built.forEach((w, idx)=>{
          const chip = document.createElement("button");
          chip.type="button";
          chip.className="ex-chip active";
          chip.textContent = w;
          chip.addEventListener("click", ()=>{
            built.splice(idx,1);
            renderPuzzle();
          });
          lineEl.appendChild(chip);
        });
      }

      clearBtn.addEventListener("click", ()=>{
        built = [];
        exerciseFeedbackEl.textContent = "";
        renderPuzzle();
      });

      renderPuzzle();

      current = { type:"puzzle", check: ()=> built.join(" ").trim() === pz.answer.trim(), answer:pz.answer, ro:pz.ro };
      return;
    }

    setEmptyQuestion("SelecteazƒÉ: Quiz / Particule / Puzzle.");
  }

  function nextQuestion(){
    const type = (exerciseTypeEl && exerciseTypeEl.value) ? exerciseTypeEl.value : "verb";
    state.lastType = type;
    if(type==="verb") state.quiz.idx += 1;
    if(type==="particle") state.particles.idx += 1;
    if(type==="puzzle") state.puzzle.idx += 1;
    saveState();
    renderQuestion(type);
  }

  function checkAnswer(){
    const type = (exerciseTypeEl && exerciseTypeEl.value) ? exerciseTypeEl.value : "verb";
    if(type==="puzzle" && current && current.type==="puzzle"){
      const ok = current.check();
      state.puzzle.total += 1;
      if(ok) state.puzzle.correct += 1;
      exerciseFeedbackEl.textContent = ok ? `‚úÖ Corect! (${current.ro})` : `‚ùå Nu √ÆncƒÉ. Corect: ${current.answer}
RO: ${current.ro}`;
      saveState();
      exerciseSubtagEl.textContent = `Puzzle ${state.puzzle.idx+1} / ${PUZZLE_BANK.length} ¬∑ Corecte ${state.puzzle.correct}`;
    } else {
      exerciseFeedbackEl.textContent = "Alege o op»õiune (tap).";
    }
  }

  if(exerciseTypeEl){
    exerciseTypeEl.value = state.lastType || "verb";
    exerciseTypeEl.addEventListener("change", ()=> renderQuestion(exerciseTypeEl.value));
  }
  if(nextQuestionBtn) nextQuestionBtn.addEventListener("click", nextQuestion);
  if(checkAnswerBtn) checkAnswerBtn.addEventListener("click", checkAnswer);

  renderQuestion(exerciseTypeEl ? exerciseTypeEl.value : "verb"); renderQuestion(exerciseTypeEl ? exerciseTypeEl.value : "verb");
  </script>
</body>
</html>

