<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Raluca Korean — Exerciții</title>

<style>
/* === UI identic cu ce ai deja === */
:root{
  --bg:#070617;
  --card: rgba(16,14,40,.75);
  --stroke: rgba(255,255,255,.12);
  --text:#f3f4ff;
  --muted: rgba(243,244,255,.7);
  --accent:#7c3aed;
  --accent2:#22d3ee;
  --radius:22px;
}
body{
  margin:0;
  font-family:system-ui;
  background:linear-gradient(135deg,#090818,#071425);
  color:var(--text);
}
.app{max-width:960px;margin:auto;padding:20px}
.card{
  background:var(--card);
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  padding:18px;
  margin-bottom:18px;
}
.pill{
  padding:8px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.2);
  cursor:pointer;
  font-weight:700;
}
.pill.active{
  background:rgba(124,58,237,.25);
}
.answers{display:grid;gap:10px}
.answer{
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  cursor:pointer;
}
.answer.correct{background:rgba(34,197,94,.25)}
.answer.wrong{background:rgba(239,68,68,.25)}
button{
  padding:10px 18px;
  border-radius:999px;
  border:none;
  background:linear-gradient(135deg,var(--accent2),var(--accent));
  font-weight:900;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="app">

<div class="card">
  <h1>Exerciții</h1>
  <div id="subtitle" style="opacity:.7"></div>

  <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">
    <div class="pill" data-type="ko-ro">Quiz</div>
    <div class="pill" data-type="particle">Particle</div>
    <div class="pill" data-type="particlePlus">Particle+</div>
    <div class="pill" data-type="puzzle">Puzzle</div>
    <div class="pill" data-type="conjug">Conjug</div>
    <div class="pill" data-type="chain">Chain</div>
  </div>
</div>

<div class="card">
  <div id="q"></div>
  <div class="answers" id="answers"></div>

  <div style="margin-top:14px;display:flex;gap:10px">
    <button onclick="check()">Verifică</button>
    <button onclick="next()">Următorul</button>
  </div>
</div>

</div>

<script>
/* =========================
   PARAMETRU DIN LECȚII
========================= */
const params = new URLSearchParams(location.search);
const activeLessonId = params.get("lesson"); // ex T1-01

/* =========================
   DATA (TU O AI DEJA)
========================= */
const DATA = window.DATA || {
  "ko-ro":[
    {lessonId:"T1-01",q:"저는 학생이에요.",opts:["Sunt student.","Sunt profesor."],a:"Sunt student."}
  ],
  "particle":[
    {lessonId:"T1-01",q:"저__ 학생이에요.",opts:["은","는","이","가"],a:"는"}
  ]
};

/* =========================
   STATE
========================= */
let typeOrder = ["ko-ro","particle","particlePlus","puzzle","conjug","chain"];
let type = null;
let pool = [];
let index = 0;
let locked = false;

/* =========================
   ELEMENTE
========================= */
const qEl = document.getElementById("q");
const aEl = document.getElementById("answers");
const subtitle = document.getElementById("subtitle");

/* =========================
   INIT
========================= */
init();

function init(){
  // găsește primul tip VALID
  for(const t of typeOrder){
    if(getPool(t).length){
      setType(t);
      break;
    }
  }
}

/* =========================
   POOL
========================= */
function getPool(t){
  let arr = DATA[t] || [];
  if(activeLessonId){
    const filtered = arr.filter(x=>x.lessonId===activeLessonId);
    return filtered.length ? filtered : arr;
  }
  return arr;
}

/* =========================
   TYPE
========================= */
document.querySelectorAll(".pill").forEach(p=>{
  p.onclick=()=>setType(p.dataset.type);
});

function setType(t){
  const newPool = getPool(t);
  if(!newPool.length) return;

  type = t;
  pool = newPool;
  index = 0;
  locked = false;

  document.querySelectorAll(".pill").forEach(p=>{
    p.classList.toggle("active",p.dataset.type===t);
  });

  subtitle.textContent = `Tip: ${t} ${activeLessonId ? "· Lecția "+activeLessonId : ""}`;
  render();
}

/* =========================
   RENDER
========================= */
function render(){
  locked=false;
  aEl.innerHTML="";
  const item = pool[index % pool.length];

  qEl.textContent = item.q;

  item.opts.forEach(opt=>{
    const el=document.createElement("div");
    el.className="answer";
    el.textContent=opt;
    el.onclick=()=>{
      if(locked) return;
      locked=true;
      el.classList.add(opt===item.a?"correct":"wrong");
    };
    aEl.appendChild(el);
  });
}

/* =========================
   ACTIONS
========================= */
function check(){}

function next(){
  index++;
  render();
}
</script>
</body>
</html>
