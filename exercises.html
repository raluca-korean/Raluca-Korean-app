<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Raluca Korean — Exercises</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:#f7f3ff;
  color:#1b1630;
}
.app{
  max-width:900px;
  margin:0 auto;
  padding:16px;
}
.card{
  background:#fff;
  border-radius:18px;
  padding:18px;
  box-shadow:0 12px 30px rgba(0,0,0,.1);
  margin-bottom:16px;
}
h1{margin:0;font-size:20px}
.sub{font-size:13px;color:#666;margin-top:4px}

select{
  width:100%;
  padding:10px;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:15px;
}

.question{
  font-size:22px;
  font-weight:800;
  margin-bottom:6px;
}
.helper{
  font-size:13px;
  color:#666;
  margin-bottom:14px;
}

.answers{
  display:grid;
  gap:10px;
  margin-bottom:14px;
}
.answer{
  padding:12px;
  border-radius:14px;
  border:2px solid #ddd;
  background:#fafafa;
  font-weight:700;
  cursor:pointer;
  transition:.15s;
}
.answer.selected{
  background:#e8ddff;
  border-color:#9b7cff;
}
.answer.correct{
  background:#d1fae5;
  border-color:#10b981;
}
.answer.wrong{
  background:#fee2e2;
  border-color:#ef4444;
}

.feedback{
  min-height:24px;
  font-weight:700;
}

.controls{
  display:flex;
  gap:10px;
  margin-top:10px;
}
button{
  padding:10px 14px;
  border-radius:999px;
  border:1px solid #ccc;
  background:#fff;
  font-weight:800;
  cursor:pointer;
}
.primary{
  background:#8b5cf6;
  color:#fff;
  border:none;
}

/* PUZZLE */
.puzzle-bank,.puzzle-line{
  border:2px dashed #ddd;
  border-radius:14px;
  padding:10px;
  min-height:52px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.chip{
  padding:8px 12px;
  border-radius:999px;
  background:#f0f0ff;
  border:1px solid #aaa;
  font-weight:800;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="app">

  <!-- HEADER -->
  <div class="card">
    <h1>Exerciții TOPIK</h1>
    <div class="sub">Quiz · Particule · Puzzle</div>
  </div>

  <!-- SELECT -->
  <div class="card">
    <label><b>Tip exercițiu</b></label>
    <select id="typeSelect">
      <option value="quiz">KO → RO (Quiz)</option>
      <option value="particle">Particule</option>
      <option value="puzzle">Puzzle</option>
    </select>
  </div>

  <!-- EXERCIȚIU -->
  <div class="card">
    <div class="question" id="question"></div>
    <div class="helper" id="helper"></div>

    <div class="answers" id="answers"></div>

    <!-- Puzzle UI -->
    <div id="puzzleUI" style="display:none">
      <div class="helper">Cuvinte</div>
      <div class="puzzle-bank" id="bank"></div>
      <div class="helper" style="margin-top:10px">Propoziția ta</div>
      <div class="puzzle-line" id="line"></div>
    </div>

    <div class="feedback" id="feedback"></div>

    <div class="controls">
      <button class="primary" id="checkBtn">Verifică</button>
      <button id="nextBtn">Următorul</button>
    </div>
  </div>

</div>

<script>
/* =========================
   DATE
========================= */
const QUIZ = [
  {ko:"저는 학교에 가요.", ro:"Eu merg la școală."},
  {ko:"오늘 커피를 마셔요.", ro:"Azi beau cafea."},
  {ko:"내일 서울에 가요.", ro:"Mâine merg la Seul."},
  {ko:"지금 한국어를 공부해요.", ro:"Acum studiez coreeană."}
];

const PARTICLES = [
  {q:"저__ 학생이에요.", opts:["은","는","이","가"], a:"는"},
  {q:"커피__ 마셔요.", opts:["을","를","에","에서"], a:"를"},
  {q:"학교__ 가요.", opts:["에","에서","을","를"], a:"에"}
];

const PUZZLES = [
  {w:["저는","학교에","가요"], a:"저는 학교에 가요"},
  {w:["오늘","커피를","마셔요"], a:"오늘 커피를 마셔요"}
];

/* =========================
   STATE
========================= */
let type="quiz", idx=0, selected=null, built=[];

/* =========================
   ELEMENTE
========================= */
const qEl = document.getElementById("question");
const hEl = document.getElementById("helper");
const aEl = document.getElementById("answers");
const fEl = document.getElementById("feedback");
const bankEl = document.getElementById("bank");
const lineEl = document.getElementById("line");
const puzzleUI = document.getElementById("puzzleUI");

/* =========================
   RENDER
========================= */
function render(){
  fEl.textContent="";
  aEl.innerHTML="";
  puzzleUI.style.display="none";
  selected=null;
  built=[];

  if(type==="quiz"){
    const q=QUIZ[idx%QUIZ.length];
    qEl.textContent=q.ko;
    hEl.textContent="Alege traducerea corectă";
    const opts=[q.ro,...QUIZ.filter(x=>x.ro!==q.ro).map(x=>x.ro)].slice(0,4).sort(()=>Math.random()-.5);
    opts.forEach(o=>{
      const d=document.createElement("div");
      d.className="answer";
      d.textContent=o;
      d.onclick=()=>select(d,o===q.ro);
      aEl.appendChild(d);
    });
  }

  if(type==="particle"){
    const p=PARTICLES[idx%PARTICLES.length];
    qEl.textContent=p.q;
    hEl.textContent="Alege particula corectă";
    p.opts.forEach(o=>{
      const d=document.createElement("div");
      d.className="answer";
      d.textContent=o;
      d.onclick=()=>select(d,o===p.a);
      aEl.appendChild(d);
    });
  }

  if(type==="puzzle"){
    const p=PUZZLES[idx%PUZZLES.length];
    qEl.textContent="Aranjează propoziția";
    hEl.textContent="";
    puzzleUI.style.display="block";
    bankEl.innerHTML="";
    lineEl.innerHTML="";
    p.w.sort(()=>Math.random()-.5).forEach(w=>{
      const c=document.createElement("div");
      c.className="chip";
      c.textContent=w;
      c.onclick=()=>{built.push(w);renderPuzzle(p)};
      bankEl.appendChild(c);
    });
  }
}

function renderPuzzle(p){
  bankEl.innerHTML="";
  lineEl.innerHTML="";
  p.w.forEach(w=>{
    if(!built.includes(w)){
      const c=document.createElement("div");
      c.className="chip";
      c.textContent=w;
      c.onclick=()=>{built.push(w);renderPuzzle(p)};
      bankEl.appendChild(c);
    }
  });
  built.forEach((w,i)=>{
    const c=document.createElement("div");
    c.className="chip";
    c.textContent=w;
    c.onclick=()=>{built.splice(i,1);renderPuzzle(p)};
    lineEl.appendChild(c);
  });
}

/* =========================
   LOGIC
========================= */
function select(el,ok){
  if(selected) return;
  selected=ok;
  document.querySelectorAll(".answer").forEach(a=>a.classList.remove("selected"));
  el.classList.add("selected");
  el.classList.add(ok?"correct":"wrong");
  fEl.textContent=ok?"✅ Corect":"❌ Greșit";
}

document.getElementById("typeSelect").onchange=e=>{
  type=e.target.value;
  idx=0;
  render();
};

document.getElementById("nextBtn").onclick=()=>{
  idx++;
  render();
};

document.getElementById("checkBtn").onclick=()=>{
  if(type==="puzzle"){
    const p=PUZZLES[idx%PUZZLES.length];
    fEl.textContent=built.join(" ")===p.a?"✅ Corect":"❌ Greșit";
  }
};

/* START */
render();
</script>
</body>
</html>
