<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Raluca Korean â€” Exercises</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:#f7f3ff;
  color:#1b1630;
}
.app{max-width:900px;margin:0 auto;padding:16px}
.card{
  background:#fff;
  border-radius:18px;
  padding:18px;
  box-shadow:0 12px 30px rgba(0,0,0,.1);
  margin-bottom:16px;
}
h1{margin:0;font-size:20px}
.sub{font-size:13px;color:#666;margin-top:4px}
select,button{
  padding:10px 14px;
  border-radius:999px;
  border:1px solid #ccc;
  font-weight:800;
  cursor:pointer;
}
select{width:100%}
.primary{background:#8b5cf6;color:#fff;border:none}
.answers{display:grid;gap:10px;margin:16px 0}
.answer{
  padding:12px;
  border-radius:14px;
  border:2px solid #ddd;
  background:#fafafa;
  cursor:pointer;
  font-weight:700;
}
.answer.selected{background:#e8ddff;border-color:#9b7cff}
.answer.correct{background:#d1fae5;border-color:#10b981}
.answer.wrong{background:#fee2e2;border-color:#ef4444}
.feedback{min-height:28px;font-weight:800}
.puzzleRow{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
.chip{
  padding:8px 12px;
  border-radius:999px;
  border:1px solid #ccc;
  background:#fff;
  font-weight:800;
  cursor:pointer;
}
.controls{display:flex;gap:10px}
  .exercise-box{
  display:none;
}
.exercise-box.active{
  display:block;
}
</style>
</head>

<body>
<div class="app">
<!-- ðŸ”’ STABILIZED ZONE â€” NU SE È˜TERGE / NU SE RESCRIE -->

<div id="ex-ko-ro" class="exercise-block"></div>
<div id="ex-ro-ko" class="exercise-block hidden"></div>
<div id="ex-particle" class="exercise-block hidden"></div>
<div id="ex-particlePlus" class="exercise-block hidden"></div>
<div id="ex-conjug" class="exercise-block hidden"></div>
<div id="ex-puzzle" class="exercise-block hidden"></div>
  <div class="card">
  <h1>ExerciÈ›ii TOPIK</h1>
  <div class="sub">Quiz Â· Particule Â· ConjugÄƒri Â· Puzzle</div>
</div>

<div class="card">
  <label><b>Tip exerciÈ›iu</b></label>
  <select id="type">
    <option value="ko-ro">KO â†’ RO</option>
    <option value="ro-ko">RO â†’ KO</option>
    <option value="particle">ParticulÄƒ (1)</option>
    <option value="particlePlus">Particule multiple</option>
    <option value="conjug">Conjugare</option>
    <option value="puzzle">Puzzle</option>
  </select>
</div>

<div class="card">
  <div id="question" style="font-size:22px;font-weight:900"></div>
  <div class="sub" id="helper"></div>

  <div id="answers" class="answers"></div>

  <div id="puzzleUI" style="display:none">
    <div class="sub">Cuvinte</div>
    <div id="bank" class="puzzleRow"></div>
    <div class="sub">PropoziÈ›ia ta</div>
    <div id="line" class="puzzleRow"></div>
  </div>

  <div id="feedback" class="feedback"></div>

  <div class="controls">
    <button id="check" class="primary">VerificÄƒ</button>
    <button id="next">UrmÄƒtorul</button>
  </div>
</div>

</div>

<script>
  /* ================= DATA ================= */

const DATA = {
  "ko-ro":[
    {q:"ì €ëŠ” í•™ìƒì´ì—ìš”.",a:"Eu sunt student."},
    {q:"ì»¤í”¼ë¥¼ ë§ˆì…”ìš”.",a:"Beau cafea."}
  ],
  "ro-ko":[
    {q:"Eu merg la È™coalÄƒ.",a:"ì €ëŠ” í•™êµì— ê°€ìš”."}
  ],
  "particle":[
    {q:"ì €__ í•™ìƒì´ì—ìš”.",opts:["ì€","ëŠ”","ì´","ê°€"],a:"ëŠ”"}
  ],
  "particlePlus":[
    {q:"ì €__ í•™êµ__ ê°€ìš”.",opts:["ì€","ëŠ”","ì—","ì—ì„œ"],a:["ëŠ”","ì—"]}
  ],
  "conjug":[
    {q:"ë¨¹ë‹¤ â†’ prezent",opts:["ë¨¹ì–´ìš”","ë¨¹ìŠµë‹ˆë‹¤","ë¨¹ì„ê²Œìš”"],a:"ë¨¹ì–´ìš”"}
  ],
  "puzzle":[
    {w:["ì €ëŠ”","í•™êµì—","ê°€ìš”"],a:"ì €ëŠ” í•™êµì— ê°€ìš”"}
  ]
};

/* ================= STATE ================= */

let type = "ko-ro";
let index = 0;
let selected = [];
let built = [];

/* ================= ELEMENTE ================= */

const typeEl = document.getElementById("type");
const qEl = document.getElementById("question");
const hEl = document.getElementById("helper");
const aEl = document.getElementById("answers");
const fEl = document.getElementById("feedback");
const bankEl = document.getElementById("bank");
const lineEl = document.getElementById("line");
const pUI = document.getElementById("puzzleUI");
const checkBtn = document.getElementById("check");
const nextBtn = document.getElementById("next");

/* ================= LOGIC ================= */

function reset(){
  aEl.innerHTML="";
  fEl.textContent="";
  selected=[];
  built=[];
  pUI.style.display="none";
  bankEl.innerHTML="";
  lineEl.innerHTML="";
}

function render(){
  reset();
  const d = DATA[type][ index % DATA[type].length ];

  if(type==="ko-ro"||type==="ro-ko"||type==="conjug"){
    qEl.textContent=d.q;
    hEl.textContent="Alege varianta corectÄƒ";
    const opts = d.opts ? d.opts : [d.a,"GreÈ™it","Alt greÈ™it"];
    opts.sort(()=>Math.random()-0.5);
    opts.forEach(o=>{
      const el=document.createElement("div");
      el.className="answer";
      el.textContent=o;
      el.onclick=()=>{
        if(selected.length) return;
        selected=[o];
        el.classList.add(o===d.a?"correct":"wrong");
        fEl.textContent=o===d.a?"âœ… Corect":"âŒ GreÈ™it";
      };
      aEl.appendChild(el);
    });
  }

  if(type==="particle"){
    qEl.textContent=d.q;
    hEl.textContent="Alege particula corectÄƒ";
    d.opts.forEach(o=>{
      const el=document.createElement("div");
      el.className="answer";
      el.textContent=o;
      el.onclick=()=>{
        if(selected.length) return;
        selected=[o];
        el.classList.add(o===d.a?"correct":"wrong");
        fEl.textContent=o===d.a?"âœ… Corect":"âŒ GreÈ™it";
      };
      aEl.appendChild(el);
    });
  }

  if(type==="particlePlus"){
    qEl.textContent=d.q;
    hEl.textContent="Alege TOATE corecte";
    d.opts.forEach(o=>{
      const el=document.createElement("div");
      el.className="answer";
      el.textContent=o;
      el.onclick=()=>el.classList.toggle("selected");
      aEl.appendChild(el);
    });
  }

  if(type==="puzzle"){
    qEl.textContent="OrdoneazÄƒ propoziÈ›ia";
    hEl.textContent="";
    pUI.style.display="block";
    d.w.forEach(w=>{
      const c=document.createElement("div");
      c.className="chip";
      c.textContent=w;
      c.onclick=()=>{
        built.push(w);
        redrawPuzzle();
      };
      bankEl.appendChild(c);
    });
  }
}

function redrawPuzzle(){
  lineEl.innerHTML="";
  built.forEach(w=>{
    const c=document.createElement("div");
    c.className="chip";
    c.textContent=w;
    lineEl.appendChild(c);
  });
}

/* ================= EVENTS ================= */

typeEl.onchange = e=>{
  type = e.target.value;
  index = 0;
  render();
};

checkBtn.onclick = ()=>{
  const d = DATA[type][ index % DATA[type].length ];
  if(type==="particlePlus"){
    const picked=[...aEl.querySelectorAll(".selected")].map(x=>x.textContent);
    fEl.textContent =
      JSON.stringify(picked.sort())===JSON.stringify(d.a.sort())
      ?"âœ… Corect":"âŒ GreÈ™it";
  }
  if(type==="puzzle"){
    fEl.textContent = built.join(" ")===d.a ? "âœ… Corect":"âŒ GreÈ™it";
  }
};

nextBtn.onclick = ()=>{
  index++;
  render();
};

render();
 
</script>
</body>
</html>
