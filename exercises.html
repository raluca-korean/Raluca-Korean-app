<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Raluca Korean – Exercises</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:#f7f3ff;
  color:#1b1630;
}
.app{max-width:900px;margin:auto;padding:16px}
.card{
  background:#fff;
  border-radius:18px;
  padding:16px;
  box-shadow:0 12px 30px rgba(0,0,0,.1);
  margin-bottom:16px;
}
h1{margin:0;font-size:20px}
.sub{font-size:13px;color:#666;margin-bottom:12px}

select{
  width:100%;
  padding:10px;
  border-radius:12px;
  font-size:15px;
}

.question{
  font-size:22px;
  font-weight:800;
  margin-bottom:8px;
}
.answers{
  display:grid;
  gap:10px;
}
.answer{
  padding:12px;
  border-radius:14px;
  border:2px solid #ddd;
  cursor:pointer;
  font-weight:700;
  transition:.15s;
}
.answer.selected{
  border-color:#8b5cf6;
  background:#efe9ff;
}
.answer.correct{
  background:#d1fae5;
  border-color:#10b981;
}
.answer.wrong{
  background:#fee2e2;
  border-color:#ef4444;
}
.controls{
  margin-top:12px;
  display:flex;
  gap:10px;
}
button{
  padding:10px 14px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  font-weight:800;
}
.primary{background:#8b5cf6;color:#fff}
.secondary{background:#eee}
.feedback{min-height:24px;font-weight:700;margin-top:8px}
.puzzle-bank,.puzzle-line{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin:10px 0;
}
.chip{
  padding:8px 12px;
  border-radius:999px;
  border:1px solid #ccc;
  cursor:pointer;
  font-weight:700;
}
</style>
</head>

<body>
<div class="app">

<div class="card">
  <h1>Exerciții TOPIK</h1>
  <div class="sub">Alege tipul de exercițiu</div>
  <select id="typeSelect">
    <option value="quiz">KO → RO</option>
    <option value="particles">Particule</option>
    <option value="puzzle">Puzzle</option>
  </select>
</div>

<div class="card">
  <div id="exercise"></div>
</div>

</div>

<script>
/* ================= DATA ================= */
const QUIZ = [
  {ko:"저는 학교에 가요.", ro:"Eu merg la școală."},
  {ko:"오늘 커피를 마셔요.", ro:"Azi beau cafea."},
  {ko:"내일 서울에 가요.", ro:"Mâine merg la Seul."}
];

const PARTICLES = [
  {text:"저__ 학생이에요.", choices:["은","는","이","가"], answer:"는"},
  {text:"학교__ 가요.", choices:["에","에서","을","를"], answer:"에"}
];

const PUZZLES = [
  {words:["저는","학교에","가요"], answer:"저는 학교에 가요"}
];

/* ================= CORE ================= */
const box = document.getElementById("exercise");
const select = document.getElementById("typeSelect");

let selected=null;

select.onchange = render;
render();

function render(){
  if(select.value==="quiz") renderQuiz();
  if(select.value==="particles") renderParticles();
  if(select.value==="puzzle") renderPuzzle();
}

/* ================= QUIZ ================= */
function renderQuiz(){
  const q = QUIZ[Math.floor(Math.random()*QUIZ.length)];
  const opts = shuffle([q.ro,"Greșit 1","Greșit 2","Greșit 3"]);
  selected=null;

  box.innerHTML=`
    <div class="question">${q.ko}</div>
    <div class="answers">
      ${opts.map(o=>`<div class="answer">${o}</div>`).join("")}
    </div>
    <div class="feedback"></div>
    <div class="controls">
      <button class="primary" id="check">Verifică</button>
      <button class="secondary" id="next">Next</button>
    </div>
  `;

  const answers=[...box.querySelectorAll(".answer")];
  answers.forEach(a=>a.onclick=()=>{
    answers.forEach(x=>x.classList.remove("selected"));
    a.classList.add("selected");
    selected=a.textContent;
  });

  box.querySelector("#check").onclick=()=>{
    if(!selected) return;
    answers.forEach(a=>{
      if(a.textContent===q.ro) a.classList.add("correct");
      else if(a.textContent===selected) a.classList.add("wrong");
    });
  };
  box.querySelector("#next").onclick=renderQuiz;
}

/* ================= PARTICLES ================= */
function renderParticles(){
  const q = PARTICLES[Math.floor(Math.random()*PARTICLES.length)];
  selected=null;

  box.innerHTML=`
    <div class="question">${q.text}</div>
    <div class="answers">
      ${q.choices.map(c=>`<div class="answer">${c}</div>`).join("")}
    </div>
    <div class="feedback"></div>
    <div class="controls">
      <button class="primary" id="check">Verifică</button>
      <button class="secondary" id="next">Next</button>
    </div>
  `;

  const answers=[...box.querySelectorAll(".answer")];
  answers.forEach(a=>a.onclick=()=>{
    answers.forEach(x=>x.classList.remove("selected"));
    a.classList.add("selected");
    selected=a.textContent;
  });

  box.querySelector("#check").onclick=()=>{
    if(!selected) return;
    answers.forEach(a=>{
      if(a.textContent===q.answer) a.classList.add("correct");
      else if(a.textContent===selected) a.classList.add("wrong");
    });
  };
  box.querySelector("#next").onclick=renderParticles;
}

/* ================= PUZZLE ================= */
function renderPuzzle(){
  const p = PUZZLES[0];
  let built=[];

  box.innerHTML=`
    <div class="question">Aranjează propoziția</div>
    <div class="puzzle-bank"></div>
    <div class="puzzle-line"></div>
    <div class="feedback"></div>
    <div class="controls">
      <button class="primary" id="check">Verifică</button>
      <button class="secondary" id="reset">Reset</button>
    </div>
  `;

  const bank=box.querySelector(".puzzle-bank");
  const line=box.querySelector(".puzzle-line");
  const feedback=box.querySelector(".feedback");

  function draw(){
    bank.innerHTML="";
    line.innerHTML="";
    p.words.forEach(w=>{
      if(!built.includes(w)){
        const c=document.createElement("div");
        c.className="chip";
        c.textContent=w;
        c.onclick=()=>{built.push(w);draw();}
        bank.appendChild(c);
      }
    });
    built.forEach((w,i)=>{
      const c=document.createElement("div");
      c.className="chip";
      c.textContent=w;
      c.onclick=()=>{built.splice(i,1);draw();}
      line.appendChild(c);
    });
  }
  draw();

  box.querySelector("#check").onclick=()=>{
    feedback.textContent =
      built.join(" ")===p.answer ? "✅ Corect" : "❌ Greșit";
  };
  box.querySelector("#reset").onclick=()=>{
    built=[];feedback.textContent="";draw();
  };
}

/* ================= UTIL ================= */
function shuffle(a){
  return a.sort(()=>Math.random()-0.5);
}
</script>
</body>
</html>
