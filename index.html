<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Builder – Korean</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <header class="app-header">
    <h1>Korean Sentence Builder</h1>
    <div class="small-label">Builder (multi-page)</div>
  </header>

  <main class="builder-page">

    <!-- BUILDER OUTPUT (placeholder pentru propoziția din tabelul principal) -->
    <section class="card">
      <div class="card-title">Builder</div>
      <div id="builderSentence" class="big-preview">(propoziția din builder apare aici)</div>
      <div class="small-label">Acest bloc rămâne pregătit pentru integrarea completă a builder-ului tău existent.</div>
    </section>

    <!-- ROMÂNĂ / ENGLISH (multi propoziții) -->
    <section class="card" id="roEnCard">
      <div class="card-title">Română / English</div>

      <div class="row controls">
        <select id="langSelect" class="input">
          <option value="ro">Română</option>
          <option value="en">English</option>
        </select>

        <label class="chk">
          <input type="checkbox" id="fillOnlyEmpty">
          Completează doar câmpurile goale
        </label>

        <button id="roTranslateBtn" class="btn primary">Completează tabelul</button>
        <button id="roClearBtn" class="btn">Curăță</button>
      </div>

      <textarea id="roInput" class="input"
        placeholder="Scrie aici (RO / EN). Poți scrie mai multe propoziții, fiecare pe rând nou."></textarea>

      <div id="clausesHost" class="clauses-host"></div>
    </section>

    <!-- PREVIEW KO -->
    <section class="card">
      <div class="card-title">Coreeană (preview)</div>

      <label class="chk">
        <input type="checkbox" id="politeToggle">
        Ultimul verb politicos (preview)
      </label>

      <div id="previewSentence" class="big-preview"></div>
      <div id="previewInfo" class="small-label"></div>
    </section>

  </main>

  <!-- NAV MULTI-PAGE (fără JS de screens) -->
  <nav class="bottom-nav">
    <a class="nav-btn active" href="index.html">Builder</a>
    <a class="nav-btn" href="exercises.html">Exerciții</a>
    <a class="nav-btn" href="lessons.html">Lecții</a>
    <a class="nav-btn" href="glossary.html">Glosar</a>
  </nav>

  <script src="js/builder.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Exerciții</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="app-header">
    <h1>Exerciții</h1>
    <div class="small-label">multi-page</div>
  </header>

  <main class="page">
    <section class="card">
      <div class="card-title">Exerciții</div>
      <div class="small-label">Pagina este separată și stabilă. Conținutul îl mutăm aici ulterior.</div>
    </section>
  </main>

  <nav class="bottom-nav">
    <a class="nav-btn" href="index.html">Builder</a>
    <a class="nav-btn active" href="exercises.html">Exerciții</a>
    <a class="nav-btn" href="lessons.html">Lecții</a>
    <a class="nav-btn" href="glossary.html">Glosar</a>
  </nav>
</body>
</html>
<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Glosar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="app-header">
    <h1>Glosar</h1>
    <div class="small-label">multi-page</div>
  </header>

  <main class="page">
    <section class="card">
      <div class="card-title">Glosar</div>
      <div class="small-label">Pagina este separată și stabilă. Conținutul îl mutăm aici ulterior.</div>
    </section>
  </main>

  <nav class="bottom-nav">
    <a class="nav-btn" href="index.html">Builder</a>
    <a class="nav-btn" href="exercises.html">Exerciții</a>
    <a class="nav-btn" href="lessons.html">Lecții</a>
    <a class="nav-btn active" href="glossary.html">Glosar</a>
  </nav>
</body>
</html>
:root{
  --bg:#f5f3ff;
  --card:#ffffffcc;
  --border:rgba(0,0,0,.08);
  --text:#1b1b1f;
  --accent:#6d28d9;
  --accent2:#4c1d95;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
}

.app-header{
  padding:16px 14px 10px;
}

h1{margin:0; font-size:20px}
.small-label{font-size:12px; opacity:.7; margin-top:4px}

.page, .builder-page{
  padding: 0 12px 88px;
  max-width: 960px;
  margin: 0 auto;
}

.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  margin: 10px 0;
  backdrop-filter: blur(8px);
}

.card-title{
  font-weight: 800;
  font-size: 13px;
  letter-spacing:.2px;
  color: var(--accent2);
  margin-bottom: 10px;
}

.big-preview{
  padding: 12px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: rgba(255,255,255,.85);
  font-size: 16px;
  line-height: 1.35;
  white-space: pre-wrap; /* NU se suprapune */
  word-break: break-word;
}

.row.controls{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  margin-bottom: 10px;
}

.input, select, textarea{
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px;
  background: rgba(255,255,255,.85);
  font-size: 14px;
}

#langSelect{min-width:160px}

#roInput{
  width:100%;
  min-height:110px;
  resize: vertical;
}

.chk{
  display:flex;
  align-items:center;
  gap:8px;
  font-size: 13px;
}

.btn{
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.85);
  font-weight: 700;
  cursor: pointer;
}
.btn.primary{
  background: var(--accent);
  color: white;
  border-color: transparent;
}
.btn:active{transform:scale(.99)}

.clauses-host{
  margin-top: 12px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.clause-card{
  padding: 10px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: rgba(255,255,255,.78);
  line-height: 1.35;
}

.bottom-nav{
  position: fixed;
  left:0; right:0; bottom:0;
  display:flex;
  gap:6px;
  padding:10px;
  background: rgba(255,255,255,.9);
  border-top: 1px solid var(--border);
  backdrop-filter: blur(10px);
}

.nav-btn{
  flex:1;
  text-align:center;
  text-decoration:none;
  padding:10px 8px;
  border-radius: 12px;
  border: 1px solid var(--border);
  color: var(--text);
  font-weight: 800;
  background: rgba(255,255,255,.8);
}
.nav-btn.active{
  background: var(--accent);
  border-color: transparent;
  color: #fff;
}
(() => {
  const roInput = document.getElementById("roInput");
  const translateBtn = document.getElementById("roTranslateBtn");
  const clearBtn = document.getElementById("roClearBtn");
  const langSelect = document.getElementById("langSelect");

  const clausesHost = document.getElementById("clausesHost");
  const previewSentence = document.getElementById("previewSentence");
  const previewInfo = document.getElementById("previewInfo");

  const politeToggle = document.getElementById("politeToggle");

  if (!roInput || !translateBtn || !clearBtn || !clausesHost || !previewSentence || !previewInfo) return;

  function escapeHtml(s){
    return (s || "")
      .replace(/&/g,"&amp;")
      .replace(/</g,"&lt;")
      .replace(/>/g,"&gt;")
      .replace(/"/g,"&quot;")
      .replace(/'/g,"&#039;");
  }

  function splitLines(text) {
    return (text || "")
      .split(/\n+/)
      .map(t => t.trim())
      .filter(Boolean);
  }

  // Traducere placeholder stabilă (nu poate crăpa paginile)
  // Când integrăm engine-ul tău real, înlocuim DOAR funcțiile astea.
  function translateRoToKo(line){
    return { ko: `KO: ${line}`, roFixed: line };
  }
  function translateEnToKo(line){
    return { ko: `KO: ${line}`, roFixed: line };
  }

  function renderCards(lines, lang){
    clausesHost.innerHTML = "";

    lines.forEach((line, idx) => {
      const result = (lang === "en") ? translateEnToKo(line) : translateRoToKo(line);

      const card = document.createElement("div");
      card.className = "clause-card";
      card.innerHTML = `
        <div class="small-label">Propoziția ${idx + 1}</div>
        <div><b>Input:</b> ${escapeHtml(line)}</div>
        <div style="margin-top:6px;"><b>KO:</b> ${escapeHtml(result.ko || "")}</div>
      `;
      clausesHost.appendChild(card);
    });
  }

  function updatePreview(lines, lang){
    if(!lines.length){
      previewSentence.textContent = "";
      previewInfo.textContent = "";
      return;
    }
    const last = lines[lines.length - 1];
    const result = (lang === "en") ? translateEnToKo(last) : translateRoToKo(last);

    // politeToggle rămâne pregătit pentru integrarea reală.
    previewSentence.textContent = result.ko || "";
    previewInfo.textContent = `Total propoziții: ${lines.length}`;
  }

  translateBtn.addEventListener("click", () => {
    const raw = (roInput.value || "").trim();
    const lines = splitLines(raw);
    const lang = (langSelect && langSelect.value === "en") ? "en" : "ro";

    renderCards(lines, lang);
    updatePreview(lines, lang);
  });

  clearBtn.addEventListener("click", () => {
    roInput.value = "";
    clausesHost.innerHTML = "";
    previewSentence.textContent = "";
    previewInfo.textContent = "";
  });

  if(politeToggle){
    politeToggle.addEventListener("change", () => {
      // Re-render preview fără să atingă restul
      const raw = (roInput.value || "").trim();
      const lines = splitLines(raw);
      const lang = (langSelect && langSelect.value === "en") ? "en" : "ro";
      updatePreview(lines, lang);
    });
  }
})();
