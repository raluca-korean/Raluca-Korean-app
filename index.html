<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>Raluca Korean – 2 propoziții test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --bg1:#dff3ff;
      --bg2:#ffe9ff;
      --card:#ffffffdd;
      --accent:#8a6bff;
      --accent2:#ff8ac2;
      --text:#262635;
      --soft:#7a7f90;
      --border:#e2dfff;
    }

    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      color:var(--text);
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      background-size:350% 350%;
      animation:bgFlow 25s ease-in-out infinite;
    }

    @keyframes bgFlow{
      0%{background-position:0% 50%;}
      50%{background-position:100% 50%;}
      100%{background-position:0% 50%;}
    }

    .app{
      max-width:1100px;
      margin:0 auto;
      padding:16px 12px 60px;
    }

    .rk-header{
      position:relative;
      padding:14px 16px 16px;
      border-radius:24px;
      background:linear-gradient(120deg,#9fd6ff,#c6a7ff,#ff9acb);
      color:#fff;
      box-shadow:0 18px 40px rgba(60,40,140,0.45);
      overflow:hidden;
    }
    .rk-header::after{
      content:"";
      position:absolute;
      left:50%;
      top:100%;
      width:260px;
      height:70px;
      transform:translateX(-50%);
      border-radius:50%;
      background:radial-gradient(circle,
        rgba(255,255,255,0.7),
        rgba(255,255,255,0)
      );
      filter:blur(24px);
      opacity:.4;
      pointer-events:none;
    }
    .rk-title-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .rk-title-row h1{
      margin:0;
      font-size:20px;
      letter-spacing:0.06em;
      text-transform:uppercase;
      font-weight:800;
    }
    .rk-badge{
      padding:4px 10px;
      border-radius:999px;
      background:rgba(255,255,255,0.2);
      font-size:11px;
      font-weight:600;
    }
    #subtitle{
      margin:6px 0 0;
      font-size:12px;
      opacity:.95;
    }

    .card{
      margin-top:16px;
      padding:16px 18px 18px;
      border-radius:22px;
      background:var(--card);
      box-shadow:
        0 18px 40px rgba(0,0,0,0.12),
        0 0 0 1px rgba(255,255,255,0.9) inset;
      backdrop-filter:blur(18px);
    }
    .card h2{
      margin:0 0 8px;
      font-size:16px;
      font-weight:800;
      letter-spacing:0.03em;
      text-transform:uppercase;
      color:#3c2c70;
    }
    .card small{
      font-size:12px;
      color:var(--soft);
    }

    textarea{
      width:100%;
      border-radius:16px;
      border:none;
      padding:10px 12px;
      font-size:14px;
      line-height:1.45;
      resize:vertical;
      min-height:70px;
      background:#ffffffee;
      box-shadow:0 8px 20px rgba(80,70,150,0.16);
    }
    textarea:focus{
      outline:none;
      box-shadow:
        0 0 0 1px #fff inset,
        0 0 0 2px rgba(153,134,255,0.9),
        0 0 16px rgba(153,134,255,0.7);
    }

    .btn-row{
      margin-top:8px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    button{
      border-radius:16px;
      border:none;
      padding:8px 14px;
      font-size:13px;
      font-weight:700;
      cursor:pointer;
      color:#fff;
      background:linear-gradient(135deg,#6b8cff,#9b6bff);
      box-shadow:
        0 12px 26px rgba(70,60,150,0.35),
        0 0 0 1px rgba(255,255,255,0.7) inset;
      transition:transform .15s ease, box-shadow .15s ease, filter .15s ease;
    }
    button.secondary{
      background:linear-gradient(135deg,#ffaf6b,#ff72b4);
    }
    button:active{
      transform:translateY(2px);
      box-shadow:0 6px 16px rgba(40,30,90,0.45);
    }

    .builder-block{
      margin-top:10px;
      border-radius:18px;
      padding:10px 10px 4px;
      background:#f7f4ffcc;
      box-shadow:0 10px 26px rgba(40,30,90,0.15);
    }
    .builder-title-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:6px;
      font-size:12px;
      color:var(--soft);
    }
    .builder-title-row strong{
      font-size:13px;
      text-transform:uppercase;
      letter-spacing:0.06em;
      color:#3c2c70;
    }

    .slots-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:6px;
    }
    .slot{
      flex:1 1 calc(12.5% - 8px);
      min-width:110px;
      max-width:200px;
      background:#fff;
      border-radius:16px;
      padding:6px 8px 8px;
      box-shadow:
        0 8px 20px rgba(60,40,120,0.16),
        0 0 0 1px rgba(255,255,255,0.8) inset;
      position:relative;
    }
    .slot-label{
      font-size:10px;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:0.08em;
      color:#6b6f8b;
      margin-bottom:3px;
    }
    .slot input{
      width:100%;
      border:none;
      background:transparent;
      font-size:14px;
      font-weight:600;
      color:var(--text);
      padding:2px 0 0;
    }
    .slot input:focus{
      outline:none;
    }
    .slot-hint{
      font-size:11px;
      color:var(--soft);
      margin-top:2px;
    }

    .p2-toggle{
      margin-top:8px;
      padding-top:6px;
      border-top:1px dashed rgba(120,110,170,0.35);
      display:flex;
      justify-content:flex-end;
      font-size:12px;
      color:var(--soft);
      gap:4px;
      align-items:center;
    }

    .preview-card{
      margin-top:14px;
      padding:12px 14px 14px;
      border-radius:22px;
      background:linear-gradient(135deg,#ffffffee,#f7f0ffdd);
      box-shadow:
        0 16px 34px rgba(40,30,90,0.22),
        0 0 0 1px rgba(255,255,255,0.9) inset;
    }
    .preview-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      font-size:13px;
      color:var(--soft);
    }
    .preview-label{
      font-weight:700;
      letter-spacing:0.06em;
      text-transform:uppercase;
      color:#3c2c70;
    }
    .preview-sentence{
      margin-top:8px;
      font-size:24px;
      font-weight:800;
      letter-spacing:0.3px;
      line-height:1.7;
      color:#221a38;
    }
    .preview-ro{
      margin-top:2px;
      font-size:13px;
      color:var(--soft);
    }

    @media (max-width:760px){
      .slot{
        flex:1 1 calc(50% - 8px);
      }
    }
  </style>
</head>
<body>
<div class="app">
  <!-- HEADER -->
  <header class="rk-header">
    <div class="rk-title-row">
      <h1>Raluca Korean</h1>
      <span class="rk-badge">Study App – 2 propoziții (test)</span>
    </div>
    <p id="subtitle">
      Scrii o propoziție foarte simplă în română &rarr; ți se umple automat Propoziția 1. 
      Propoziția 2 o poți adăuga manual ca să creezi o frază.
    </p>
  </header>

  <!-- CARD ROMÂNĂ → BUILDER AUTO (doar P1) -->
  <section class="card" id="roCard">
    <h2>Română → Coreeană (Completează automat Propoziția 1)</h2>
    <small>
      Exemplu: <em>Astăzi merg la cafenea și beau o cafea.</em> (parser-ul știe doar câteva cuvinte de test: eu, azi, mâine, acasă, la școală, cafenea, cafea, apă, carte, merg, beau, mănânc, citesc etc.)
    </small>

    <textarea id="roInput" placeholder="Scrie propoziția ta simplă în română pentru Propoziția 1..."></textarea>

    <div class="btn-row">
      <button id="autoFillBtn">Completează automat builder-ul (Propoziția 1)</button>
      <button id="clearBtn" class="secondary">Curăță tot</button>
    </div>
  </section>

  <!-- BUILDER PROPOZIȚIA 1 + 2 -->
  <section class="card" id="builderCard">
    <!-- P1 -->
    <div class="builder-block" id="builderP1">
      <div class="builder-title-row">
        <strong>Propoziția 1 – Părți de vorbire</strong>
        <span>(se poate completa automat din română)</span>
      </div>

      <div class="slots-row" data-sentence="1">
        <div class="slot">
          <div class="slot-label">Subject</div>
          <input id="p1-subject" placeholder="저 / 나 ..." />
          <div class="slot-hint">eu, tu, el/ea...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Time</div>
          <input id="p1-time" placeholder="오늘 / 내일..." />
          <div class="slot-hint">azi, mâine, ieri...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Place</div>
          <input id="p1-place" placeholder="집 / 학교 / 카페..." />
          <div class="slot-hint">acasă, la școală, la cafenea...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Mod (cum?)</div>
          <input id="p1-mod" placeholder="천천히 / 잘..." />
          <div class="slot-hint">încet, bine, repede...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Object (ce?)</div>
          <input id="p1-object" placeholder="커피 / 책..." />
          <div class="slot-hint">cafea, apă, carte...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Numeral</div>
          <input id="p1-numeral" placeholder="한 / 두 / 세..." />
          <div class="slot-hint">una, două, trei...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Counter</div>
          <input id="p1-counter" placeholder="개 / 권..." />
          <div class="slot-hint">pentru obiecte, cărți...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Verb</div>
          <input id="p1-verb" placeholder="가요 / 마셔요..." />
          <div class="slot-hint">merg, beau, mănânc, citesc...</div>
        </div>
      </div>
    </div>

    <!-- toggle P2 -->
    <div class="p2-toggle">
      <label>
        <input type="checkbox" id="enableP2" />
        <span>Activează Propoziția 2 (continuare / frază)</span>
      </label>
    </div>

    <!-- P2 -->
    <div class="builder-block" id="builderP2" style="display:none;">
      <div class="builder-title-row">
        <strong>Propoziția 2 – Părți de vorbire</strong>
        <span>(se editează manual, după ce știi ce frază vrei)</span>
      </div>

      <div class="slots-row" data-sentence="2">
        <div class="slot">
          <div class="slot-label">Subject</div>
          <input id="p2-subject" placeholder="저 / 나 ..." />
          <div class="slot-hint">poate fi același sau alt subiect</div>
        </div>
        <div class="slot">
          <div class="slot-label">Time</div>
          <input id="p2-time" placeholder="내일 / 다음 주..." />
          <div class="slot-hint">mâine, săptămâna viitoare...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Place</div>
          <input id="p2-place" placeholder="학교 / 회사..." />
          <div class="slot-hint">la școală, la firmă...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Mod (cum?)</div>
          <input id="p2-mod" placeholder="열심히 / 천천히..." />
          <div class="slot-hint">harnic, încet, bine...</div>
        </div>
        <div class="slot">
          <div class="slot-label">Object (ce?)</div>
          <input id="p2-object" placeholder="책 / 한국어..." />
          <div class="slot-hint">ce altceva se întâmplă în frază</div>
        </div>
        <div class="slot">
          <div class="slot-label">Numeral</div>
          <input id="p2-numeral" placeholder="한 / 두..." />
          <div class="slot-hint">opțional</div>
        </div>
        <div class="slot">
          <div class="slot-label">Counter</div>
          <input id="p2-counter" placeholder="개 / 권..." />
          <div class="slot-hint">opțional</div>
        </div>
        <div class="slot">
          <div class="slot-label">Verb</div>
          <input id="p2-verb" placeholder="가요 / 공부해요..." />
          <div class="slot-hint">ex: 공부해요 (studiez), 가요 (merg)...</div>
        </div>
      </div>
    </div>

    <!-- PREVIEW FRAZĂ -->
    <div class="preview-card">
      <div class="preview-header">
        <span class="preview-label">Propoziția finală în coreeană</span>
        <span id="connectorInfo" style="font-size:12px;color:var(--soft);">
          Conector folosit: <strong>그리고</strong> (și / iar)
        </span>
      </div>
      <div class="preview-sentence" id="previewSentence">
        <!-- Aici apare propoziția coreeană -->
      </div>
      <div class="preview-ro" id="previewRo">
        <!-- Aici poți pune cândva și româna, dacă vrei -->
      </div>
    </div>
  </section>
</div>

<script>
  // ======================================================
  // 1. Parser foarte simplu: română -> sloturi pentru P1
  //    (ca demo – nu acoperă toate cazurile)
  // ======================================================

  function normalizeRo(text){
    if(!text) return "";
    let t = text.toLowerCase();
    t = t.replace(/ş/g,"ș").replace(/ţ/g,"ț");
    t = t.replace(/[.,!?;:]/g," ");
    t = t.replace(/\s+/g," ").trim();
    return t;
  }

  const RO_RULES = {
    subject: [
      { re:/\beu\b/, value:"저" },
      { re:/\btu\b/, value:"너" }
    ],
    time:[
      { re:/\bazi\b|\bastăzi\b/, value:"오늘" },
      { re:/\bmâine\b/, value:"내일" },
      { re:/\bieri\b/, value:"어제" }
    ],
    place:[
      { re:/acas[ăa]\b/, value:"집" },
      { re:/la\s+școal[ăa]|la\s+scoala|școal[ăa]\b|scoala\b/, value:"학교" },
      { re:/cafenea|cafene[al]/, value:"카페" },
      { re:/la\s+firm[ăa]|serviciu|companie/, value:"회사" }
    ],
    mod:[
      { re:/încet|incet/, value:"천천히" },
      { re:/repede|rapid/, value:"빨리" },
      { re:/bine\b|ok\b/, value:"잘" }
    ],
    object:[
      { re:/cafea/, value:"커피" },
      { re:/\bap[ăa]\b/, value:"물" },
      { re:/carte|c[ăa]rți|c[ăa]rti\b/, value:"책" },
      { re:/m[ăa]ncare|pr[ăa]nzul|cina|mic\s+dejun/, value:"음식" }
    ],
    numeral:[
      { re:/o\s+cafea|o\s+carte|ună?\s+carte/, value:"한" },
      { re:/dou[ăa]\s+carți|dou[ăa]\s+cafele/, value:"두" },
      { re:/trei\s+carți|trei\s+cafele/, value:"세" }
    ],
    counter:[
      { re:/carte|c[ăa]rti\b/, value:"권" },
      { re:/cafea|ap[ăa]\b|m[ăa]ncare/, value:"개" }
    ],
    verb:[
      { re:/merg\b|a merge|să merg|sa merg/, value:"가요" },
      { re:/vin\b|a veni|să vin|sa vin/, value:"와요" },
      { re:/beau\b|a bea|să beau|sa beau/, value:"마셔요" },
      { re:/m[ăa]nânc|mananc|a m[ăa]nca/, value:"먹어요" },
      { re:/citesc|a citi/, value:"읽어요" },
      { re:/lucrez|a lucra/, value:"일해요" }
    ]
  };

  function matchSlot(rules, text){
    if(!rules) return null;
    for(const rule of rules){
      if(rule.re.test(text)) return rule.value;
    }
    return "";
  }

  function parseRomanianToSlots(text){
    const t = normalizeRo(text);
    return {
      subject: matchSlot(RO_RULES.subject, t),
      time:    matchSlot(RO_RULES.time, t),
      place:   matchSlot(RO_RULES.place, t),
      mod:     matchSlot(RO_RULES.mod, t),
      object:  matchSlot(RO_RULES.object, t),
      numeral: matchSlot(RO_RULES.numeral, t),
      counter: matchSlot(RO_RULES.counter, t),
      verb:    matchSlot(RO_RULES.verb, t)
    };
  }

  // ==========================================
  // 2. Helper: ia sloturile din input-uri
  // ==========================================
  function getSlotsFromInputs(prefix){
    return {
      subject: document.getElementById(prefix+"-subject").value.trim(),
      time:    document.getElementById(prefix+"-time").value.trim(),
      place:   document.getElementById(prefix+"-place").value.trim(),
      mod:     document.getElementById(prefix+"-mod").value.trim(),
      object:  document.getElementById(prefix+"-object").value.trim(),
      numeral: document.getElementById(prefix+"-numeral").value.trim(),
      counter: document.getElementById(prefix+"-counter").value.trim(),
      verb:    document.getElementById(prefix+"-verb").value.trim()
    };
  }

  function setSlotsToInputs(prefix, slots){
    if(!slots) return;
    if(slots.subject) document.getElementById(prefix+"-subject").value = slots.subject;
    if(slots.time)    document.getElementById(prefix+"-time").value    = slots.time;
    if(slots.place)   document.getElementById(prefix+"-place").value   = slots.place;
    if(slots.mod)     document.getElementById(prefix+"-mod").value     = slots.mod;
    if(slots.object)  document.getElementById(prefix+"-object").value  = slots.object;
    if(slots.numeral) document.getElementById(prefix+"-numeral").value = slots.numeral;
    if(slots.counter) document.getElementById(prefix+"-counter").value = slots.counter;
    if(slots.verb)    document.getElementById(prefix+"-verb").value    = slots.verb;
  }

  // ==========================================
  // 3. Construiește propoziția din sloturi
  // ==========================================
  function buildSentenceFromSlots(slots){
    if(!slots) return "";
    const subject = slots.subject || "저";
    const time    = slots.time;
    const place   = slots.place;
    const mod     = slots.mod;
    const object  = slots.object;
    const numeral = slots.numeral;
    const counter = slots.counter;
    const verb    = slots.verb || "가요";

    let objectChunk = "";
    if(object && numeral && counter){
      objectChunk = object + " " + numeral + " " + counter;
    }else if(object){
      objectChunk = object;
    }

    const pieces = [subject, time, place, mod, objectChunk, verb].filter(Boolean);
    return pieces.join(" ");
  }

  // ==========================================
  // 4. Actualizează preview-ul final (P1 + P2)
  // ==========================================
  function updatePreview(){
    const slots1 = getSlotsFromInputs("p1");
    const s1 = buildSentenceFromSlots(slots1);

    let finalSentence = s1;

    const enableP2 = document.getElementById("enableP2").checked;
    if(enableP2){
      const slots2 = getSlotsFromInputs("p2");
      const s2 = buildSentenceFromSlots(slots2);
      if(s2){
        const connector = "그리고"; // simplu: “și / iar”
        finalSentence = s1 ? (s1 + " " + connector + " " + s2) : s2;
      }
    }

    document.getElementById("previewSentence").textContent =
      finalSentence || "Aici va apărea propoziția finală în coreeană.";
  }

  // ==========================================
  // 5. Evenimente butoane + toggle P2 + input-uri
  // ==========================================
  const autoFillBtn = document.getElementById("autoFillBtn");
  const clearBtn    = document.getElementById("clearBtn");
  const enableP2El  = document.getElementById("enableP2");
  const builderP2   = document.getElementById("builderP2");

  if(autoFillBtn){
    autoFillBtn.addEventListener("click", () => {
      const text = document.getElementById("roInput").value;
      const slots = parseRomanianToSlots(text);
      setSlotsToInputs("p1", slots);
      updatePreview();
    });
  }

  if(clearBtn){
    clearBtn.addEventListener("click", () => {
      document.getElementById("roInput").value = "";
      ["p1","p2"].forEach(prefix=>{
        ["subject","time","place","mod","object","numeral","counter","verb"].forEach(field=>{
          const el = document.getElementById(prefix+"-"+field);
          if(el) el.value = "";
        });
      });
      updatePreview();
    });
  }

  if(enableP2El){
    enableP2El.addEventListener("change", () => {
      builderP2.style.display = enableP2El.checked ? "block" : "none";
      updatePreview();
    });
  }

  // când utilizatorul modifică manual sloturile, refacem propoziția
  document.querySelectorAll(".slot input").forEach(input=>{
    input.addEventListener("input", updatePreview);
  });

  // setăm un mesaj inițial
  updatePreview();
</script>
</body>
</html>
